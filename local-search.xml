<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>ä»‹ç»ä¸€ä¸‹æˆ‘å¼Ÿå¼Ÿ</title>
    <link href="/2025/10/03/My-Brothers-Growth-Diary/"/>
    <url>/2025/10/03/My-Brothers-Growth-Diary/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><!-- å¼€å¤´å†™ä¸€æ®µå¼•è¨€ï¼Œå¥ å®šæ–‡ç« åŸºè°ƒ --><blockquote><p>æ—¶å…‰èè‹’ï¼Œé‚£ä¸ªè·Ÿåœ¨æˆ‘èº«åæµç€é¼»æ¶•çš„å°ä¸ç‚¹ï¼Œä¸çŸ¥ä¸è§‰å·²é•¿æˆç¿©ç¿©å°‘å¹´ã€‚ç¿»çœ‹æ—§ç…§ç‰‡ï¼Œå¾€äº‹å¦‚æ½®æ°´èˆ¬æ¶Œæ¥ã€‚è°¨ä»¥æ­¤æ–‡ï¼Œè®°å½•æˆ‘ä»¬ä¸€èµ·èµ°è¿‡çš„ç¾å¥½æ—¶å…‰ã€‚</p></blockquote><!-- ç¬¬ä¸€éƒ¨åˆ†ï¼šå©´å„¿æ—¶æœŸ --><h2 id="ğŸ¼-åˆæ¥ä¹åˆ°ï¼Œå°å°ä¸€åª"><a href="#ğŸ¼-åˆæ¥ä¹åˆ°ï¼Œå°å°ä¸€åª" class="headerlink" title="ğŸ¼ åˆæ¥ä¹åˆ°ï¼Œå°å°ä¸€åª"></a>ğŸ¼ åˆæ¥ä¹åˆ°ï¼Œå°å°ä¸€åª</h2><p><img src="https://cdn.jsdelivr.net/gh/qiuliqi/qiuliqi.github.io@master/img/psc3.jpg"></p><ul><li>  <strong>æ—¶é—´ï¼š</strong> 2012å¹´8æœˆ7æ—¥</li><li>  <strong>tsï¼š</strong> è¿™æ˜¯æœ€æ—©çš„ä¸€å¼ å›¾ç‰‡</li></ul><hr><!-- ç¬¬äºŒéƒ¨åˆ†ï¼šå¹¼å„¿æ—¶æœŸ --><h2 id="ğŸš—-è¹’è·šå­¦æ­¥ï¼Œå’¿å‘€å­¦è¯­"><a href="#ğŸš—-è¹’è·šå­¦æ­¥ï¼Œå’¿å‘€å­¦è¯­" class="headerlink" title="ğŸš— è¹’è·šå­¦æ­¥ï¼Œå’¿å‘€å­¦è¯­"></a>ğŸš— è¹’è·šå­¦æ­¥ï¼Œå’¿å‘€å­¦è¯­</h2><p><img src="https://cdn.jsdelivr.net/gh/qiuliqi/qiuliqi.github.io@master/img/psc2.jpg"></p><ul><li>  <strong>æ—¶é—´ï¼š</strong> 2014å¹´3æœˆ22æ—¥</li><li>  <strong>tsï¼š</strong> åœ¨æˆ‘å®¶åé¢å±±ä¸Šæ‹çš„</li></ul><p><img src="https://cdn.jsdelivr.net/gh/qiuliqi/qiuliqi.github.io@master/img/a8a556f7dd716587b8f1a041fe83485e.jpg"><br><img src="https://cdn.jsdelivr.net/gh/qiuliqi/qiuliqi.github.io@master/img/psc4.jpg"><br><img src="https://cdn.jsdelivr.net/gh/qiuliqi/qiuliqi.github.io@master/img/psc5.jpg"></p><ul><li>  <strong>æ—¶é—´ï¼š</strong> 2016å¹´1æœˆ25æ—¥</li><li>  <strong>tsï¼š</strong> è¡¨æƒ…è¡¨æ¼”ã€‚ã€‚ã€‚</li></ul><hr><!-- ç¬¬ä¸‰éƒ¨åˆ†ï¼šç«¥å¹´æ—¶æœŸ --><h2 id="ğŸš²-å°å°å°‘å¹´ï¼Œæ²¡æœ‰çƒ¦æ¼"><a href="#ğŸš²-å°å°å°‘å¹´ï¼Œæ²¡æœ‰çƒ¦æ¼" class="headerlink" title="ğŸš² å°å°å°‘å¹´ï¼Œæ²¡æœ‰çƒ¦æ¼"></a>ğŸš² å°å°å°‘å¹´ï¼Œæ²¡æœ‰çƒ¦æ¼</h2><p><img src="https://cdn.jsdelivr.net/gh/qiuliqi/qiuliqi.github.io@master/img/87fd476112aca892daa972a33074b78b.jpg"><br><img src="https://cdn.jsdelivr.net/gh/qiuliqi/qiuliqi.github.io@master/img/IMG_20170824_115843.jpg"><br><img src="https://cdn.jsdelivr.net/gh/qiuliqi/qiuliqi.github.io@master/img/135d878ed1b9f023aee12e4577ec1b48.jpg"><br><img src="https://cdn.jsdelivr.net/gh/qiuliqi/qiuliqi.github.io@master/img/IMG_20200213_174500.jpg"></p><ul><li>  <strong>æ—¶é—´ï¼š</strong> 2016å¹´2æœˆ18æ—¥</li><li>  <strong>tsï¼š</strong> æ´—ç¢—å“ˆå“ˆ</li></ul><hr><!-- ç¬¬å››éƒ¨åˆ†ï¼šé’å°‘å¹´æ—¶æœŸ --><h2 id="ğŸ“-é’æ˜¥é£æ‰¬ï¼Œå¥”èµ´å±±æµ·"><a href="#ğŸ“-é’æ˜¥é£æ‰¬ï¼Œå¥”èµ´å±±æµ·" class="headerlink" title="ğŸ“ é’æ˜¥é£æ‰¬ï¼Œå¥”èµ´å±±æµ·"></a>ğŸ“ é’æ˜¥é£æ‰¬ï¼Œå¥”èµ´å±±æµ·</h2><p><img src="https://cdn.jsdelivr.net/gh/qiuliqi/qiuliqi.github.io@master/img/ead7b493851826bc3d282e0ab5a69195.jpg"><br><img src="https://cdn.jsdelivr.net/gh/qiuliqi/qiuliqi.github.io@master/img/f9bc6652d542d90212d9c2fececb23a7.jpg"><br><img src="https://cdn.jsdelivr.net/gh/qiuliqi/qiuliqi.github.io@master/img/IMG_20180223_174419.jpg"><br><img src="https://cdn.jsdelivr.net/gh/qiuliqi/qiuliqi.github.io@master/img/IMG_20190913_100539.jpg"><br><img src="https://cdn.jsdelivr.net/gh/qiuliqi/qiuliqi.github.io@master/img/IMG_20200222_094037.jpg"><br><img src="https://cdn.jsdelivr.net/gh/qiuliqi/qiuliqi.github.io@master/img/IMG_20230121_154118.jpg"><br><img src="https://cdn.jsdelivr.net/gh/qiuliqi/qiuliqi.github.io@master/img/IMG_20231002_160046.jpg"></p><ul><li>  <strong>æ—¶é—´ï¼š</strong> 2023å¹´10æœˆ2æ—¥</li><li>  <strong>tsï¼š</strong> ä¸€è½¬çœ¼ï¼Œå°±æ˜¯é«˜ä¸­ç”Ÿäº†ã€‚</li></ul><p><img src="https://cdn.jsdelivr.net/gh/qiuliqi/qiuliqi.github.io@master/img/mmexport1742740000460.jpg"><br><img src="https://cdn.jsdelivr.net/gh/qiuliqi/qiuliqi.github.io@master/img/IMG_20250831_113529.jpg"><br><img src="https://cdn.jsdelivr.net/gh/qiuliqi/qiuliqi.github.io@master/img/IMG_20250831_130054.jpg"></p><ul><li>  <strong>æ—¶é—´ï¼š</strong> 2025å¹´8æœˆ31æ—¥</li><li>  <strong>tsï¼š</strong> é«˜ä¸­æ¯•ä¸šï¼Œè¿‡æ¥æˆ‘è¿™æ—…æ¸¸</li></ul><!-- ç»“å°¾ï¼ŒæŠ’å‘æ„Ÿæƒ… --><h2 id="ğŸ’Œ-å†™åˆ°æœ€å"><a href="#ğŸ’Œ-å†™åˆ°æœ€å" class="headerlink" title="ğŸ’Œ å†™åˆ°æœ€å"></a>ğŸ’Œ å†™åˆ°æœ€å</h2><p><img src="https://cdn.jsdelivr.net/gh/qiuliqi/qiuliqi.github.io@master/img/IMG_20200207_151038.jpg"></p><p>æ„¿ä½ æ°¸è¿œé˜³å…‰ï¼Œæ°¸è¿œèµ¤è¯šï¼Œå‹‡æ•¢åœ°å»è¿½é€è‡ªå·±çš„æ¢¦æƒ³ã€‚</p>]]></content>
    
    
    
    <tags>
      
      <tag>å¼Ÿå¼Ÿ</tag>
      
      <tag>æˆé•¿</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å§æ§½ç§‹å¤©æ¥äº†å•Šï¼</title>
    <link href="/2025/10/03/guoqing/"/>
    <url>/2025/10/03/guoqing/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h2 id="å›½åº†éšæ‹"><a href="#å›½åº†éšæ‹" class="headerlink" title="å›½åº†éšæ‹"></a>å›½åº†éšæ‹</h2><p><img src="https://cdn.jsdelivr.net/gh/qiuliqi/qiuliqi.github.io@master/img/IMG_20250928_083347.jpg"></p><p><img src="https://cdn.jsdelivr.net/gh/qiuliqi/qiuliqi.github.io@master/img/IMG_20250928_083531.jpg"></p><p><img src="https://cdn.jsdelivr.net/gh/qiuliqi/qiuliqi.github.io@master/img/IMG_20250928_083015.jpg"></p><p><img src="https://cdn.jsdelivr.net/gh/qiuliqi/qiuliqi.github.io@master/img/IMG_20250928_082943.jpg"></p><p><img src="https://cdn.jsdelivr.net/gh/qiuliqi/qiuliqi.github.io@master/img/IMG_20250928_082915.jpg"></p>]]></content>
    
    
    
    <tags>
      
      <tag>å›½åº†å¿«ä¹</tag>
      
      <tag>ç§‹å¤©</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç®€é™‹APIæ­å»º</title>
    <link href="/2025/10/02/apidaj/"/>
    <url>/2025/10/02/apidaj/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p style="text-indent: 2em;">ä»Šå¤©åœ¨ç½‘ä¸Šçœ‹åˆ°ä¸€ä¸ªå¤§ç¥çš„éšæœºå›¾ç‰‡çš„apiï¼Œåˆšå¥½æœ€è¿‘åœ¨åšç½‘é¡µçš„åŠ¨æ€èƒŒæ™¯ï¼Œè¿™ä¹ˆå¤šå¥½çœ‹çš„åŠ¨æ€å£çº¸ï¼Œå½“ç„¶è¦å…¨éƒ¨éƒ½æ”¾åˆ°æˆ‘çš„ç½‘ç«™ä¸Š</p><p>äºæ˜¯å°±æŠŠå¤§ä½¬çš„apiç®€å•ä¿®æ”¹ä¸€ä¸‹ï¼Œåšæˆéšæœºè§†é¢‘çš„apiï¼Œé…åˆwallpaperå°±å¯ä»¥åœ¨æ¡Œé¢è®¾ç½®å¯ä»¥éšæœºçš„åŠ¨æ€å£çº¸</p><p><img src="https://cdn.jsdelivr.net/gh/qiuliqi/live2d@master/biz/20200528224934.png" alt="ä»£ç æˆªå›¾"></p><p>èµ·é£</p><p>~~ APIåˆé›†ï¼š<a href="https://api.qiuliqi.top/">https://api.qiuliqi.top/</a></p><p>~~ éšæœºè§†é¢‘apiï¼š<a href="https://api.qiuliqi.top/sp/">https://api.qiuliqi.top/sp/</a></p><p>~~ åŠ¨æ€å£çº¸+çœ‹æ¿å¨˜ï¼š<a href="https://qiuliqi.top/2233/dtbz.html">https://qiuliqi.top/2233/dtbz.html</a></p><p>~~ æ”¾æ¡Œé¢ä½¿ç”¨ï¼š<a href="https://qiuliqi.top/2233/dtbz.html?bottom=40&amp;right=20">https://qiuliqi.top/2233/dtbz.html?bottom=40&amp;right=20</a></p><p>~~ å¤åˆ¶é“¾æ¥åœ¨wallpaperçš„URLä½¿ç”¨å³å¯</p><p>æ„Ÿè°¢<a href="https://www.toubiec.cn/12.html">è‹æ™“æ™´</a>åšå®¢æä¾›çš„APIæºç </p>]]></content>
    
    
    
    <tags>
      
      <tag>api</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å…³äºåŒ—æä»£ç åº“è´¡çŒ®è€…</title>
    <link href="/2025/10/02/bjidmk/"/>
    <url>/2025/10/02/bjidmk/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>æœ€è¿‘æ‰å¬è¯´GitHubå®£å¸ƒå·²å°†æ‰€æœ‰ä»£ç æ°¸ä¹…å°å­˜äºåŒ—æåœ°åº•1000å¹´ï¼ç«‹é©¬è·‘å»GitHubçœ‹çœ‹æˆ‘çš„ä»£ç åº“ï¼Œæœç„¶æˆ‘çš„hellWordä¹Ÿåœ¨ä¸Šé¢</p><p><img src="https://cdn.jsdelivr.net/gh/qiuliqi/live2d@master/biz/20200724194428-1.png" alt="æˆªå›¾2"></p><p>è™½ç„¶åªå†™ä¸ªhelloWordæ„Ÿè§‰æœ‰ç‚¹ç¾è€»ï¼Œä½†æˆ‘æƒ³åº”è¯¥ä¸ä¼šåªæœ‰æˆ‘ä¸€äººè¿™æ ·å§ï¼å˜¿å˜¿</p>]]></content>
    
    
    
    <tags>
      
      <tag>github</tag>
      
      <tag>Hello World</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç”¨flaskåšä¸€ä¸ªå±äºè‡ªå·±çš„å°è¯´ä¹¦æ¶</title>
    <link href="/2025/10/02/my-bookshelf/"/>
    <url>/2025/10/02/my-bookshelf/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ä¸€ç›´æƒ³åšä¸€ä¸ªå±äºè‡ªå·±çš„ç½‘ç»œä¹¦æ¶ï¼Œç›´æ¥è¯»å–å°è¯´txtæ–‡ä»¶ï¼Œå¤šç«¯æœ‰é˜…è¯»è®°å½•ã€‚</p><p>å…¶ä»–çš„å°è¯´ç½‘ç«™è¦ä¹ˆè¦èŠ±é’±ï¼Œè¦ä¹ˆå¹¿å‘Šå¤šçš„é£èµ·ï¼Œå®åœ¨çœ‹çš„å¿ƒç´¯ã€‚</p><p>åœ¨<a href="https://read.helloflask.com/">æè¾‰è€å¸ˆ</a>é‚£å­¦äº†ä¸€å‘¨çš„flaskï¼Œå°±åšäº†è¿™ä¸ªä¹¦æ¶ï¼ŒåŸºæœ¬åŠŸèƒ½è¿˜ç®—æœ‰äº†ï¼Œå¤§å¤šéƒ½æ˜¯è€å¸ˆæ•™çš„åŠŸèƒ½å®ç°</p><p>UIç¡®å®æ˜¯æœ‰ç‚¹ä¸‘é™‹ï¼Œcsséƒ½æ˜¯ä¸œæ‹¼è¥¿å‡‘åˆä¸Šæ¥çš„ï¼Œè°å«æˆ‘æ²¡æœ‰è‰ºæœ¯ç»†èƒå‘¢ï¼Ÿ</p><p>~~ å°ç§‹ç§‹é˜…è¯» <a href="https://book.qiuliqi.top/">https://book.qiuliqi.top/</a></p><p><img src="https://api.qiuliqi.top/tp/tuc/20210820194321.png"></p><p><img src="https://api.qiuliqi.top/tp/tuc/20210820194333.png"></p><h2 id="å·²å®ç°çš„åŠŸèƒ½"><a href="#å·²å®ç°çš„åŠŸèƒ½" class="headerlink" title="å·²å®ç°çš„åŠŸèƒ½"></a>å·²å®ç°çš„åŠŸèƒ½</h2><p>1.ä¸Šä¼ txtæ–‡ä»¶è‡ªåŠ¨å¯¼å…¥å°è¯´ï¼Œç”Ÿæˆå°è¯´ç›®å½•</p><p>2.æ³¨å†Œç™»å½•åå¯ä»¥ä¿å­˜é˜…è¯»è®°å½•</p><p>3.ç•™è¨€æ¿åŠŸèƒ½</p><p>4.ç®¡ç†å‘˜è´¦å·ç®¡ç†ä¼šå‘˜ä¿¡æ¯å’Œç•™è¨€ä¿¡æ¯</p><h2 id="éƒ¨åˆ†ä»£ç "><a href="#éƒ¨åˆ†ä»£ç " class="headerlink" title="éƒ¨åˆ†ä»£ç "></a>éƒ¨åˆ†ä»£ç </h2><p>app.py</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, request, render_template, url_for, flash, redirect<br><span class="hljs-keyword">from</span> gevent <span class="hljs-keyword">import</span> pywsgi<br><span class="hljs-keyword">from</span> flask_sqlalchemy <span class="hljs-keyword">import</span> SQLAlchemy  <span class="hljs-comment"># æ•°æ®åº“æ‰©å±•ç±»</span><br><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><span class="hljs-keyword">import</span> click<br><span class="hljs-keyword">from</span> werkzeug.security <span class="hljs-keyword">import</span> generate_password_hash, check_password_hash<br><span class="hljs-keyword">from</span> flask_login <span class="hljs-keyword">import</span> LoginManager, UserMixin,login_user, login_required, logout_user,current_user<br><br><br>WIN = sys.platform.startswith(<span class="hljs-string">&#x27;win&#x27;</span>)<br><span class="hljs-keyword">if</span> WIN:  <span class="hljs-comment"># å¦‚æœæ˜¯ Windows ç³»ç»Ÿï¼Œä½¿ç”¨ä¸‰ä¸ªæ–œçº¿</span><br>    prefix = <span class="hljs-string">&#x27;sqlite:///&#x27;</span><br><span class="hljs-keyword">else</span>:  <span class="hljs-comment"># å¦åˆ™ä½¿ç”¨å››ä¸ªæ–œçº¿</span><br>    prefix = <span class="hljs-string">&#x27;sqlite:////&#x27;</span><br><br>app = Flask(__name__)<br>app.config[<span class="hljs-string">&#x27;SECRET_KEY&#x27;</span>] = <span class="hljs-string">&#x27;dev&#x27;</span>  <span class="hljs-comment"># ç­‰åŒäº app.secret_key = &#x27;dev&#x27;</span><br>app.config[<span class="hljs-string">&#x27;SQLALCHEMY_DATABASE_URI&#x27;</span>] = prefix + os.path.join(app.root_path, <span class="hljs-string">&#x27;data.db&#x27;</span>)<br>app.config[<span class="hljs-string">&#x27;SQLALCHEMY_TRACK_MODIFICATIONS&#x27;</span>] = <span class="hljs-literal">False</span>  <span class="hljs-comment"># å…³é—­å¯¹æ¨¡å‹ä¿®æ”¹çš„ç›‘æ§</span><br><span class="hljs-comment"># åœ¨æ‰©å±•ç±»å®ä¾‹åŒ–å‰åŠ è½½é…ç½®</span><br>db = SQLAlchemy(app)  <span class="hljs-comment"># åˆå§‹åŒ–æ‰©å±•ï¼Œä¼ å…¥ç¨‹åºå®ä¾‹ app</span><br>login_manager = LoginManager(app)  <span class="hljs-comment"># å®ä¾‹åŒ–ç™»å½•æ‰©å±•ç±»</span><br>login_manager.login_view = <span class="hljs-string">&#x27;login&#x27;</span><br><br><br><span class="hljs-comment"># ç”¨æˆ·è¡¨</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span>(<span class="hljs-params">db.Model,UserMixin</span>):</span>  <span class="hljs-comment"># è¡¨åå°†ä¼šæ˜¯ userï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼Œå°å†™å¤„ç†ï¼‰</span><br>    <span class="hljs-built_in">id</span> = db.Column(db.Integer, primary_key=<span class="hljs-literal">True</span>)<br>    name = db.Column(db.String(<span class="hljs-number">20</span>))<br>    username = db.Column(db.String(<span class="hljs-number">20</span>))  <span class="hljs-comment"># ç”¨æˆ·å</span><br>    password_hash = db.Column(db.String(<span class="hljs-number">128</span>))  <span class="hljs-comment"># å¯†ç æ•£åˆ—å€¼</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">set_password</span>(<span class="hljs-params">self, password</span>):</span>  <span class="hljs-comment"># ç”¨æ¥è®¾ç½®å¯†ç çš„æ–¹æ³•ï¼Œæ¥å—å¯†ç ä½œä¸ºå‚æ•°</span><br>        self.password_hash = generate_password_hash(password)  <span class="hljs-comment"># å°†ç”Ÿæˆçš„å¯†ç ä¿æŒåˆ°å¯¹åº”å­—æ®µ</span><br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">validate_password</span>(<span class="hljs-params">self, password</span>):</span>  <span class="hljs-comment"># ç”¨äºéªŒè¯å¯†ç çš„æ–¹æ³•ï¼Œæ¥å—å¯†ç ä½œä¸ºå‚æ•°</span><br>        <span class="hljs-keyword">return</span> check_password_hash(self.password_hash, password)  <span class="hljs-comment"># è¿”å›å¸ƒå°”å€¼</span><br><br><br><span class="hljs-comment"># ç•™è¨€è¡¨</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Movie</span>(<span class="hljs-params">db.Model</span>):</span>  <span class="hljs-comment"># è¡¨åå°†ä¼šæ˜¯ movie</span><br>    <span class="hljs-built_in">id</span> = db.Column(db.Integer, primary_key=<span class="hljs-literal">True</span>)  <span class="hljs-comment"># ä¸»é”®</span><br>    content = db.Column(db.String(<span class="hljs-number">60</span>))  <span class="hljs-comment"># ç•™è¨€å†…å®¹</span><br>    name = db.Column(db.String(<span class="hljs-number">6</span>))  <span class="hljs-comment"># æ˜µç§°</span><br><br><br><span class="hljs-comment"># é˜…è¯»è®°å½•è¡¨</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Read</span>(<span class="hljs-params">db.Model</span>):</span>  <span class="hljs-comment"># è¡¨åå°†ä¼šæ˜¯ read</span><br>    <span class="hljs-built_in">id</span> = db.Column(db.Integer, primary_key=<span class="hljs-literal">True</span>)  <span class="hljs-comment"># ä¸»é”®</span><br>    uesrname = db.Column(db.String(<span class="hljs-number">20</span>))  <span class="hljs-comment"># ç”¨æˆ·å</span><br>    bookname = db.Column(db.String(<span class="hljs-number">20</span>))  <span class="hljs-comment"># ä¹¦å</span><br>    zjid = db.Column(db.Integer)  <span class="hljs-comment"># ä¹¦å</span><br><br><br><span class="hljs-comment"># åˆå§‹åŒ–æ•°æ®åº“</span><br><span class="hljs-meta">@app.cli.command()  </span><span class="hljs-comment"># æ³¨å†Œä¸ºå‘½ä»¤</span><br><span class="hljs-meta">@click.option(<span class="hljs-params"><span class="hljs-string">&#x27;--drop&#x27;</span>, is_flag=<span class="hljs-literal">True</span>, <span class="hljs-built_in">help</span>=<span class="hljs-string">&#x27;åˆ é™¤ååˆ›å»º.&#x27;</span></span>)  </span><span class="hljs-comment"># è®¾ç½®é€‰é¡¹</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">initdb</span>(<span class="hljs-params">drop</span>):</span><br>    <span class="hljs-string">&quot;&quot;&quot;åˆå§‹åŒ–æ•°æ®åº“.&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">if</span> drop:  <span class="hljs-comment"># åˆ¤æ–­æ˜¯å¦è¾“å…¥äº†é€‰é¡¹</span><br>        db.drop_all()  <span class="hljs-comment"># åˆ é™¤æ•°æ®åº“</span><br>    db.create_all()<br>    click.echo(<span class="hljs-string">&#x27;å·²åˆå§‹åŒ–çš„æ•°æ®åº“.&#x27;</span>)<br><br><br><span class="hljs-comment"># ç”Ÿæˆç®¡ç†å‘˜è´¦å·</span><br><span class="hljs-meta">@app.cli.command()</span><br><span class="hljs-meta">@click.option(<span class="hljs-params"><span class="hljs-string">&#x27;--username&#x27;</span>, prompt=<span class="hljs-literal">True</span>, <span class="hljs-built_in">help</span>=<span class="hljs-string">&#x27;The username used to login.&#x27;</span></span>)</span><br><span class="hljs-meta">@click.option(<span class="hljs-params"><span class="hljs-string">&#x27;--password&#x27;</span>, prompt=<span class="hljs-literal">True</span>, hide_input=<span class="hljs-literal">True</span>, confirmation_prompt=<span class="hljs-literal">True</span>, <span class="hljs-built_in">help</span>=<span class="hljs-string">&#x27;The password used to login.&#x27;</span></span>)</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">admin</span>(<span class="hljs-params">username, password</span>):</span><br>    <span class="hljs-string">&quot;&quot;&quot;Create user.&quot;&quot;&quot;</span><br>    db.create_all()<br><br>    user = User.query.first()<br>    <span class="hljs-keyword">if</span> user <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:<br>        click.echo(<span class="hljs-string">&#x27;Updating user...&#x27;</span>)<br>        user.username = username<br>        user.set_password(password)  <span class="hljs-comment"># è®¾ç½®å¯†ç </span><br>    <span class="hljs-keyword">else</span>:<br>        click.echo(<span class="hljs-string">&#x27;Creating user...&#x27;</span>)<br>        user = User(username=username, name=<span class="hljs-string">&#x27;Admin&#x27;</span>)<br>        user.set_password(password)  <span class="hljs-comment"># è®¾ç½®å¯†ç </span><br>        db.session.add(user)<br><br>    db.session.commit()  <span class="hljs-comment"># æäº¤æ•°æ®åº“ä¼šè¯</span><br>    click.echo(<span class="hljs-string">&#x27;Done.&#x27;</span>)<br><br><br><span class="hljs-comment"># åˆå§‹åŒ– Flask-Login</span><br><span class="hljs-meta">@login_manager.user_loader</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">load_user</span>(<span class="hljs-params">user_id</span>):</span>  <span class="hljs-comment"># åˆ›å»ºç”¨æˆ·åŠ è½½å›è°ƒå‡½æ•°ï¼Œæ¥å—ç”¨æˆ· ID ä½œä¸ºå‚æ•°</span><br>    user = User.query.get(<span class="hljs-built_in">int</span>(user_id))  <span class="hljs-comment"># ç”¨ ID ä½œä¸º User æ¨¡å‹çš„ä¸»é”®æŸ¥è¯¢å¯¹åº”çš„ç”¨æˆ·</span><br>    <span class="hljs-keyword">return</span> user  <span class="hljs-comment"># è¿”å›ç”¨æˆ·å¯¹è±¡</span><br><br><br><span class="hljs-comment"># é¦–é¡µ</span><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/&#x27;</span>, methods=[<span class="hljs-string">&#x27;GET&#x27;</span>, <span class="hljs-string">&#x27;POST&#x27;</span>]</span>)</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">index</span>():</span><br>    <span class="hljs-comment"># å¤„ç†æ–°å¢ç•™è¨€</span><br>    <span class="hljs-keyword">if</span> request.method == <span class="hljs-string">&#x27;POST&#x27;</span>:  <span class="hljs-comment"># åˆ¤æ–­æ˜¯å¦æ˜¯ POST è¯·æ±‚</span><br>        <span class="hljs-comment"># è·å–è¡¨å•æ•°æ®</span><br>        content = request.form.get(<span class="hljs-string">&#x27;content&#x27;</span>)  <span class="hljs-comment"># ä¼ å…¥è¡¨å•å¯¹åº”è¾“å…¥å­—æ®µçš„ name å€¼</span><br>        name = request.form.get(<span class="hljs-string">&#x27;name&#x27;</span>)<br>        <span class="hljs-comment"># éªŒè¯æ•°æ®</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> content <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> name <span class="hljs-keyword">or</span> <span class="hljs-built_in">len</span>(name) &gt; <span class="hljs-number">6</span> <span class="hljs-keyword">or</span> <span class="hljs-built_in">len</span>(content) &gt; <span class="hljs-number">60</span>:<br>            flash(<span class="hljs-string">&#x27;è¾“å…¥æ— æ•ˆ.&#x27;</span>)  <span class="hljs-comment"># æ˜¾ç¤ºé”™è¯¯æç¤º</span><br>            <span class="hljs-keyword">return</span> redirect(url_for(<span class="hljs-string">&#x27;index&#x27;</span>))  <span class="hljs-comment"># é‡å®šå‘å›ä¸»é¡µ</span><br>        <span class="hljs-comment"># ä¿å­˜è¡¨å•æ•°æ®åˆ°æ•°æ®åº“</span><br>        movie = Movie(content=content, name=name)  <span class="hljs-comment"># åˆ›å»ºè®°å½•</span><br>        db.session.add(movie)  <span class="hljs-comment"># æ·»åŠ åˆ°æ•°æ®åº“ä¼šè¯</span><br>        db.session.commit()  <span class="hljs-comment"># æäº¤æ•°æ®åº“ä¼šè¯</span><br>        flash(<span class="hljs-string">&#x27;æ‚¨çš„ç•™è¨€å·²æäº¤æˆåŠŸ.&#x27;</span>)<br>        <span class="hljs-keyword">return</span> redirect(url_for(<span class="hljs-string">&#x27;index&#x27;</span>))  <span class="hljs-comment"># é‡å®šå‘å›ä¸»é¡µ</span><br>    <span class="hljs-comment"># è¯»å–ç•™è¨€ä¿¡æ¯</span><br>    ly_lists = Movie.query.<span class="hljs-built_in">all</span>()<br>    <span class="hljs-comment"># è¯»å–å°è¯´åˆ—è¡¨</span><br>    book_lists = os.listdir(<span class="hljs-string">&#x27;static/book&#x27;</span>)<br>    <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">&#x27;index.html&#x27;</span>, book_lists=book_lists, ly_lists=ly_lists)<br><br><br><span class="hljs-comment"># ç™»å½•é¡µ</span><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/login&#x27;</span>, methods=[<span class="hljs-string">&#x27;GET&#x27;</span>, <span class="hljs-string">&#x27;POST&#x27;</span>]</span>)</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">login</span>():</span><br>    <span class="hljs-keyword">if</span> request.method == <span class="hljs-string">&#x27;POST&#x27;</span>:<br>        username = request.form[<span class="hljs-string">&#x27;username&#x27;</span>]<br>        password = request.form[<span class="hljs-string">&#x27;password&#x27;</span>]<br><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> username <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> password:<br>            flash(<span class="hljs-string">&#x27;è¾“å…¥æ— æ•ˆ.&#x27;</span>)<br>            <span class="hljs-keyword">return</span> redirect(url_for(<span class="hljs-string">&#x27;login&#x27;</span>))<br><br>        user = User.query.filter_by(username=username).first()<br>        <span class="hljs-keyword">if</span> user:<br>            <span class="hljs-comment"># éªŒè¯ç”¨æˆ·åå’Œå¯†ç æ˜¯å¦ä¸€è‡´</span><br>            <span class="hljs-keyword">if</span> username == user.username <span class="hljs-keyword">and</span> user.validate_password(password):<br>                login_user(user)  <span class="hljs-comment"># ç™»å…¥ç”¨æˆ·</span><br>                flash(current_user.username + <span class="hljs-string">&#x27;ï¼Œæ¬¢è¿å›å®¶ï¼&#x27;</span>)<br>                <span class="hljs-keyword">return</span> redirect(url_for(<span class="hljs-string">&#x27;index&#x27;</span>))  <span class="hljs-comment"># é‡å®šå‘åˆ°ä¸»é¡µ</span><br><br>        flash(<span class="hljs-string">&#x27;æ— æ•ˆçš„ç”¨æˆ·åæˆ–å¯†ç .&#x27;</span>)  <span class="hljs-comment"># å¦‚æœéªŒè¯å¤±è´¥ï¼Œæ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯</span><br>        <span class="hljs-keyword">return</span> redirect(url_for(<span class="hljs-string">&#x27;login&#x27;</span>))  <span class="hljs-comment"># é‡å®šå‘å›ç™»å½•é¡µé¢</span><br><br>    <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">&#x27;login.html&#x27;</span>)<br><br><br><span class="hljs-comment"># æ³¨å†Œé¡µ</span><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/signup&#x27;</span>, methods=[<span class="hljs-string">&#x27;GET&#x27;</span>, <span class="hljs-string">&#x27;POST&#x27;</span>]</span>)</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">signup</span>():</span><br>    <span class="hljs-keyword">if</span> request.method == <span class="hljs-string">&#x27;POST&#x27;</span>:<br>        username = request.form[<span class="hljs-string">&#x27;username&#x27;</span>]<br>        password = request.form[<span class="hljs-string">&#x27;password&#x27;</span>]<br><br>        <span class="hljs-comment"># æ£€æµ‹æ­£ç¡®æ€§</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> username <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> password <span class="hljs-keyword">or</span> <span class="hljs-built_in">len</span>(username) &gt; <span class="hljs-number">20</span> <span class="hljs-keyword">or</span> <span class="hljs-built_in">len</span>(password) &gt; <span class="hljs-number">20</span>:<br>            flash(<span class="hljs-string">&#x27;è¾“å…¥æ— æ•ˆ.&#x27;</span>)<br>            <span class="hljs-keyword">return</span> redirect(url_for(<span class="hljs-string">&#x27;signup&#x27;</span>))<br>        <span class="hljs-comment"># è°ƒæˆå¤§ä½¬</span><br>        <span class="hljs-keyword">if</span> username.lower() == <span class="hljs-string">&#x27;admin&#x27;</span>:<br>            flash(<span class="hljs-string">&#x27;å¤§ä½¬ï¼Œç®¡ç†å‘˜æ˜¯å°ç§‹ç§‹å“¦ï¼&#x27;</span>)<br>            <span class="hljs-keyword">return</span> redirect(url_for(<span class="hljs-string">&#x27;signup&#x27;</span>))<br>        <span class="hljs-comment"># æ£€æŸ¥è´¦å·é‡å¤é¡¹</span><br>        users = User.query.filter_by(username=username).first()<br>        <span class="hljs-keyword">if</span> users:  <span class="hljs-comment"># å¦‚æœæŸ¥è¯¢åˆ°ï¼Œåˆ™é‡å¤</span><br>            flash(<span class="hljs-string">&#x27;æ³¨å†Œè´¦å·é‡å¤ï¼Œè¯·é‡æ–°è¾“å…¥ï¼&#x27;</span>)<br>            <span class="hljs-keyword">return</span> redirect(url_for(<span class="hljs-string">&#x27;signup&#x27;</span>))<br>        <span class="hljs-keyword">else</span>:  <span class="hljs-comment"># æ²¡æœ‰æŸ¥è¯¢åˆ°ï¼Œåˆ™æ³¨å†Œ</span><br>            user = User(username=username, name=username)<br>            user.set_password(password)  <span class="hljs-comment"># è®¾ç½®å¯†ç </span><br>            db.session.add(user)<br>            db.session.commit()  <span class="hljs-comment"># æäº¤æ•°æ®åº“ä¼šè¯</span><br>            flash(<span class="hljs-string">&#x27;æ³¨å†ŒæˆåŠŸï¼&#x27;</span>)<br>            <span class="hljs-keyword">return</span> redirect(url_for(<span class="hljs-string">&#x27;login&#x27;</span>))  <span class="hljs-comment"># å‰å¾€ç™»å½•é¡µ</span><br><br>    <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">&#x27;signup.html&#x27;</span>)<br><br><br><span class="hljs-comment"># ä¼šå‘˜ç®¡ç†</span><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/admin&#x27;</span></span>)</span><br><span class="hljs-meta">@login_required  </span><span class="hljs-comment"># ç”¨äºè§†å›¾ä¿æŠ¤ï¼Œåé¢ä¼šè¯¦ç»†ä»‹ç»</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">admin</span>():</span><br>    <span class="hljs-keyword">if</span> current_user.<span class="hljs-built_in">id</span> == <span class="hljs-number">1</span>:  <span class="hljs-comment"># å¦‚æœä¼šå‘˜idä¸º 1</span><br>        <span class="hljs-comment"># æŸ¥è¯¢æ‰€æœ‰ä¼šå‘˜ä¿¡æ¯</span><br>        admins = User.query.<span class="hljs-built_in">all</span>()<br>        <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">&#x27;admin.html&#x27;</span>, admins=admins)<br><br><br><span class="hljs-comment"># åˆ é™¤ä¼šå‘˜</span><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/admin/delete/&lt;int:admin_id&gt;&#x27;</span>, methods=[<span class="hljs-string">&#x27;POST&#x27;</span>]</span>)</span><br><span class="hljs-meta">@login_required  </span><span class="hljs-comment"># ç”¨äºè§†å›¾ä¿æŠ¤ï¼Œåé¢ä¼šè¯¦ç»†ä»‹ç»</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">admindelete</span>(<span class="hljs-params">admin_id</span>):</span><br>    <span class="hljs-keyword">if</span> admin_id != <span class="hljs-number">1</span>:<br>        admim = User.query.get_or_404(admin_id)  <span class="hljs-comment"># è·å–ä¼šå‘˜è®°å½•</span><br>        name = admim.username<br>        <span class="hljs-comment"># åˆ é™¤é˜…è¯»è®°å½•</span><br>        readjls = Read.query.filter_by(uesrname=name).<span class="hljs-built_in">all</span>()<br>        <span class="hljs-keyword">if</span> readjls:<br>            <span class="hljs-keyword">for</span> readjl <span class="hljs-keyword">in</span> readjls:<br>                db.session.delete(readjl)<br>        <span class="hljs-comment"># åˆ é™¤ä¼šå‘˜</span><br>        db.session.delete(admim)<br>        db.session.commit()  <span class="hljs-comment"># æäº¤æ•°æ®åº“ä¼šè¯</span><br>        flash(<span class="hljs-string">&#x27;ä¼šå‘˜å·²åˆ é™¤ï¼&#x27;</span>)<br><br>    <span class="hljs-keyword">return</span> redirect(url_for(<span class="hljs-string">&#x27;admin&#x27;</span>))  <span class="hljs-comment"># é‡å®šå‘å›ä¼šå‘˜é¡µ</span><br><br><br><span class="hljs-comment"># ç™»å‡ºé¡µ</span><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/logout&#x27;</span></span>)</span><br><span class="hljs-meta">@login_required  </span><span class="hljs-comment"># ç”¨äºè§†å›¾ä¿æŠ¤ï¼Œåé¢ä¼šè¯¦ç»†ä»‹ç»</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">logout</span>():</span><br>    logout_user()  <span class="hljs-comment"># ç™»å‡ºç”¨æˆ·</span><br>    flash(<span class="hljs-string">&#x27;æ¬¢è¿ä¸‹æ¬¡å…‰ä¸´ï¼&#x27;</span>)<br>    <span class="hljs-keyword">return</span> redirect(url_for(<span class="hljs-string">&#x27;index&#x27;</span>))  <span class="hljs-comment"># é‡å®šå‘å›é¦–é¡µ</span><br><br><br><span class="hljs-comment"># åˆ é™¤ç•™è¨€</span><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/movie/delete/&lt;int:movie_id&gt;&#x27;</span>, methods=[<span class="hljs-string">&#x27;POST&#x27;</span>]</span>)  </span><span class="hljs-comment"># é™å®šåªæ¥å— POST è¯·æ±‚</span><br><span class="hljs-meta">@login_required  </span><span class="hljs-comment"># ç”¨äºè§†å›¾ä¿æŠ¤ï¼Œåé¢ä¼šè¯¦ç»†ä»‹ç»</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">delete</span>(<span class="hljs-params">movie_id</span>):</span><br>    movie = Movie.query.get_or_404(movie_id)  <span class="hljs-comment"># è·å–ç”µå½±è®°å½•</span><br>    db.session.delete(movie)  <span class="hljs-comment"># åˆ é™¤å¯¹åº”çš„è®°å½•</span><br>    db.session.commit()  <span class="hljs-comment"># æäº¤æ•°æ®åº“ä¼šè¯</span><br>    flash(<span class="hljs-string">&#x27;ç•™è¨€å·²åˆ é™¤.&#x27;</span>)<br>    <span class="hljs-keyword">return</span> redirect(url_for(<span class="hljs-string">&#x27;index&#x27;</span>))  <span class="hljs-comment"># é‡å®šå‘å›ä¸»é¡µ</span><br><br><br><span class="hljs-comment"># ç›®å½•é¡µ</span><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/book/&lt;book_id&gt;&#x27;</span></span>)</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">book_page</span>(<span class="hljs-params">book_id=<span class="hljs-string">&#x27;è®¸ä»™å¿—.txt&#x27;</span></span>):</span><br>    book_path = <span class="hljs-string">&#x27;static/book/&#x27;</span> + book_id<br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(book_path, <span class="hljs-string">&#x27;r&#x27;</span>, encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>) <span class="hljs-keyword">as</span> f:<br>        txts = f.readlines()<br>    nums = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">len</span>(txts) / <span class="hljs-number">100</span>) + <span class="hljs-number">1</span><br>    page_nums = <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-built_in">int</span>(nums))<br>    <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">&#x27;page.html&#x27;</span>, book_id=book_id, page_nums=page_nums)<br><br><br><span class="hljs-comment"># é˜…è¯»è®°å½•</span><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/record&#x27;</span></span>)</span><br><span class="hljs-meta">@login_required  </span><span class="hljs-comment"># ç”¨äºè§†å›¾ä¿æŠ¤ï¼Œåé¢ä¼šè¯¦ç»†ä»‹ç»</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">record</span>():</span><br>    <span class="hljs-comment"># æ•°æ®åº“æŸ¥æ‰¾é˜…è¯»è®°å½•</span><br>    zj_ids = Read.query.filter_by(uesrname=current_user.username).<span class="hljs-built_in">all</span>()  <span class="hljs-comment"># è¿”å›åŒ…å«æ‰€æœ‰æŸ¥è¯¢è®°å½•çš„åˆ—è¡¨</span><br>    <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">&#x27;record.html&#x27;</span>, zj_ids=zj_ids)<br><br><br><span class="hljs-comment"># é˜…è¯»é¡µ</span><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/&lt;book_id&gt;/&lt;int:movie_id&gt;&#x27;</span>, methods=[<span class="hljs-string">&#x27;GET&#x27;</span>, <span class="hljs-string">&#x27;POST&#x27;</span>]</span>)</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">home</span>(<span class="hljs-params">book_id=<span class="hljs-string">&#x27;è®¸ä»™å¿—.txt&#x27;</span>, movie_id=<span class="hljs-number">1</span></span>):</span><br>    book_path = <span class="hljs-string">&#x27;static/book/&#x27;</span> + book_id<br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(book_path, <span class="hljs-string">&#x27;r&#x27;</span>, encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>) <span class="hljs-keyword">as</span> f:<br>        txts = f.readlines()<br>    <span class="hljs-comment"># å¦‚æœå·²ç»ç™»å½•ï¼Œåˆ™è®°å½•é˜…è¯»è®°å½•</span><br>    <span class="hljs-keyword">if</span> current_user.is_authenticated:<br>        username = current_user.username<br>        <span class="hljs-keyword">if</span> movie_id == <span class="hljs-number">1</span>:  <span class="hljs-comment"># å¦‚æœç›´æ¥ç‚¹é˜…è¯»è®¿é—®ç¬¬ä¸€ç« ï¼Œåˆ™æŸ¥è¯¢é˜…è¯»è®°å½•</span><br>            xj_ids = Read.query.filter_by(uesrname=username, bookname=book_id).first()<br>            <span class="hljs-keyword">if</span> xj_ids:  <span class="hljs-comment"># å¦‚æœæŸ¥è¯¢åˆ°ï¼Œè¿™è¯»å–ç« èŠ‚id</span><br>                movie_id = xj_ids.zjid<br>            <span class="hljs-keyword">else</span>:  <span class="hljs-comment"># å¦‚æœæŸ¥è¯¢ä¸åˆ°åˆ°ï¼Œåˆ™åˆ›å»ºè®°å½•</span><br>                r1 = Read(uesrname=username, bookname=book_id, zjid=movie_id)  <span class="hljs-comment"># # åˆ›å»ºä¸€ä¸ª Read è®°å½•</span><br>                db.session.add(r1)  <span class="hljs-comment"># æŠŠæ–°åˆ›å»ºçš„è®°å½•æ·»åŠ åˆ°æ•°æ®åº“ä¼šè¯</span><br>                db.session.commit()  <span class="hljs-comment"># æäº¤æ•°æ®åº“ä¼šè¯ï¼Œåªéœ€è¦åœ¨æœ€åè°ƒç”¨ä¸€æ¬¡å³å¯</span><br>        <span class="hljs-keyword">else</span>:  <span class="hljs-comment"># å¦‚æœä¸æ˜¯é˜…è¯»ç¬¬ä¸€ç« ï¼Œåˆ™æ›´æ–°é˜…è¯»è®°å½•</span><br>            xj_ids = Read.query.filter_by(uesrname=username, bookname=book_id).first()<br>            <span class="hljs-keyword">if</span> xj_ids:<br>                xj_ids.zjid = movie_id<br>                db.session.commit()  <span class="hljs-comment"># æ³¨æ„ä»ç„¶éœ€è¦è°ƒç”¨è¿™ä¸€è¡Œæ¥æäº¤æ”¹åŠ¨</span><br>            <span class="hljs-keyword">else</span>:  <span class="hljs-comment"># å¦‚æœæŸ¥è¯¢ä¸åˆ°åˆ°ï¼Œåˆ™åˆ›å»ºè®°å½•</span><br>                r1 = Read(uesrname=username, bookname=book_id, zjid=movie_id)  <span class="hljs-comment"># # åˆ›å»ºä¸€ä¸ª Read è®°å½•</span><br>                db.session.add(r1)  <span class="hljs-comment"># æŠŠæ–°åˆ›å»ºçš„è®°å½•æ·»åŠ åˆ°æ•°æ®åº“ä¼šè¯</span><br>                db.session.commit()  <span class="hljs-comment"># æäº¤æ•°æ®åº“ä¼šè¯ï¼Œåªéœ€è¦åœ¨æœ€åè°ƒç”¨ä¸€æ¬¡å³å¯</span><br><br>                <span class="hljs-comment"># æ›´æ–°</span><br>                xj_ids = Read.query.filter_by(uesrname=username, bookname=book_id).first()<br>                xj_ids.zjid = movie_id<br>                db.session.commit()  <span class="hljs-comment"># æ³¨æ„ä»ç„¶éœ€è¦è°ƒç”¨è¿™ä¸€è¡Œæ¥æäº¤æ”¹åŠ¨</span><br><br>    txt_mun = movie_id * <span class="hljs-number">100</span><br>    <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">&#x27;home.html&#x27;</span>, book_id=book_id, movie_id=movie_id, contents=txts[txt_mun-<span class="hljs-number">100</span>:txt_mun])<br><br><br><span class="hljs-meta">@app.errorhandler(<span class="hljs-params"><span class="hljs-number">404</span></span>)  </span><span class="hljs-comment"># ä¼ å…¥è¦å¤„ç†çš„é”™è¯¯ä»£ç </span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">page_not_found</span>(<span class="hljs-params">e</span>):</span>  <span class="hljs-comment"># æ¥å—å¼‚å¸¸å¯¹è±¡ä½œä¸ºå‚æ•°</span><br>    <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">&#x27;404.html&#x27;</span>), <span class="hljs-number">404</span>  <span class="hljs-comment"># è¿”å›æ¨¡æ¿å’ŒçŠ¶æ€ç </span><br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    server = pywsgi.WSGIServer((<span class="hljs-string">&#x27;0.0.0.0&#x27;</span>, <span class="hljs-number">5000</span>), app)<br>    server.serve_forever()<br></code></pre></td></tr></table></figure><blockquote><p>æç¤º ä½ å¯ä»¥åœ¨ <a href="https://github.com/qiuliqi/my-bookshelf">GitHub</a> ä¸ŠæŸ¥çœ‹å®Œæ•´é¡¹ç›®</p></blockquote><h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>æŠŠæ‰€æœ‰ä»£ç æ”¾åœ¨ app.py é‡Œä¼šè®©åç»­çš„å¼€å‘å’Œç»´æŠ¤å˜å¾—éº»çƒ¦ï¼Œä½†æ˜¯æˆ‘å¤ªæ‡’äº†ï¼Œè§‰å¾—é‡æ„ä»£ç æ›´éº»çƒ¦ï¼Œå°±æ²¡æœ‰ä½¿ç”¨åŒ…ç»„ç»‡ä»£ç äº†â€¦</p>]]></content>
    
    
    
    <tags>
      
      <tag>python3</tag>
      
      <tag>flask</tag>
      
      <tag>å°è¯´ä¹¦æ¶</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ–°å¹´å¿«ä¹ï¼</title>
    <link href="/2025/01/05/xqqxnkl/"/>
    <url>/2025/01/05/xqqxnkl/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h2 id="è¿‡å¹´"><a href="#è¿‡å¹´" class="headerlink" title="è¿‡å¹´"></a>è¿‡å¹´</h2><p>ä¸çŸ¥ä¸è§‰åˆè¦è¿‡å¹´äº†ï¼Œå…ˆç¥å¤§å®¶æ–°å¹´å¿«ä¹ï¼</p><p>ç„¶åæ˜¯è¿™ä¸€å¹´çš„æ€»ç»“ï¼Œè¿™ä¸€å¹´è¿‡çš„å¤ªå¿«äº†ã€‚ã€‚ã€‚</p><p>æ–°çš„ä¸€å¹´ï¼ŒåŠ æ²¹ï¼</p><h2 id="ç»“å©š"><a href="#ç»“å©š" class="headerlink" title="ç»“å©š"></a>ç»“å©š</h2><p>æ–°å¹´å¿«ä¹ï¼è™½ç„¶ç›®å‰æˆ‘è¿˜äº«å—ç€å•èº«çš„è‡ªç”±æ—¶å…‰ã€‚</p>]]></content>
    
    
    
    <tags>
      
      <tag>å°å¹´</tag>
      
      <tag>å¿«ä¹</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>çŒ«ç›˜nas</title>
    <link href="/2025/01/05/xqqnas/"/>
    <url>/2025/01/05/xqqnas/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h2 id="çŒ«ç›˜nas"><a href="#çŒ«ç›˜nas" class="headerlink" title="çŒ«ç›˜nas"></a>çŒ«ç›˜nas</h2><p>æœ‰ä¸€æ®µæ—¶é—´çªç„¶å¾ˆæƒ³è¦ä¸€ä¸ªè‡ªå·±çš„å­˜å‚¨ï¼Œä¸çŸ¥é“æ˜¯å› ä¸ºæ‰‹æœºæ²¡ç©ºé—´äº†</p><p>è¿˜æ˜¯å› ä¸ºæŸä¸ªå¤§ä½¬å‘æˆ‘ç‚«è€€ä»–çš„é‚£å‡ åä¸ªTçš„å­˜å‚¨ç©ºé—´ã€‚ã€‚ã€‚</p><p>çœ‹äº†å¥½å¤šäº§å“ï¼Œæœ€å¿ƒåŠ¨çš„è¿˜æ˜¯åä¸ºçš„å®¶åº­å‚¨å­˜ï¼Œæˆ‘æ˜¯åä¸ºæ‰‹æœºå¯ä»¥ç›´æ¥æ‰©å®¹ç›¸å†Œ</p><p>ä½†æœ€ç»ˆè¿˜æ˜¯çœ‹ä¸Šäº†é—²é±¼çš„çŒ«ç›˜ï¼Œå› ä¸ºä½“ç§¯å°ä¾¿å®œ</p><p>ç„¶ååœ¨äº¬ä¸œä¹°äº†ä¸€å—4Tçš„ç¡¬ç›˜ï¼Œä¹Ÿæ˜¯ç”¨ä¸Šäº†nas</p><p>åˆ·é»‘ç¾¤æ™–ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œç½‘ä¸Šå¥½å¤šæ•™ç¨‹</p><h2 id="ä½¿ç”¨ä½“éªŒ"><a href="#ä½¿ç”¨ä½“éªŒ" class="headerlink" title="ä½¿ç”¨ä½“éªŒ"></a>ä½¿ç”¨ä½“éªŒ</h2><p>å¼€å§‹è¿˜æ˜¯æ¯”è¾ƒæ–°å¥‡çš„ï¼ŒæŠŠæˆ‘ç…§ç‰‡è§†é¢‘å…¨éƒ¨ä¸Šä¼ äº†</p><p>ç„¶åæ‰‹æœºä¸Šçœ‹å•Šï¼Œç”µè„‘ä¸ŠæŸ¥çœ‹å•Šï¼Œæ•ˆæœè¿˜è¡Œå§</p><p>åˆ°ç°åœ¨å·²ç»ä¸æ€ä¹ˆç©äº†ï¼Œåªåšä¸€ä¸ªæ‰‹æœºå¤‡ä»½çš„åŠŸèƒ½ç”¨</p><p>ä¸ºä»€ä¹ˆï¼Ÿ</p><p>å› ä¸ºæ²¡æœ‰æ›¿æ¢æˆ‘æ‰‹æœºè‡ªå¸¦çš„ç›¸å†Œï¼Œä¹Ÿæ²¡æœ‰è§£å†³æˆ‘æ‰‹æœºç©ºé—´é—®é¢˜</p>]]></content>
    
    
    
    <tags>
      
      <tag>nas</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ–°å¹´å¿«ä¹ï¼</title>
    <link href="/2024/02/03/xnkl/"/>
    <url>/2024/02/03/xnkl/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h2 id="è¿‡å¹´"><a href="#è¿‡å¹´" class="headerlink" title="è¿‡å¹´"></a>è¿‡å¹´</h2><p>ä¸çŸ¥ä¸è§‰åˆè¦è¿‡å¹´äº†ï¼Œå…ˆç¥å¤§å®¶æ–°å¹´å¿«ä¹ï¼</p><p>ç„¶åæ˜¯è¿™ä¸€å¹´çš„æ€»ç»“ï¼Œè¿™ä¸€å¹´å› ä¸ºè¦æ¢å·¥ä½œï¼ˆä¸Šä¸€ä»½å·¥ä½œå¤ªå®‰é€¸äº†ä¹Ÿæ²¡é’±ï¼‰ï¼Œæ„Ÿè§‰å•¥ä¹Ÿæ²¡æåˆ°ï¼Œé’±æ²¡èµšåˆ°ï¼Œå¥³æœ‹å‹ä¹Ÿæ²¡æœ‰ã€‚</p><p>æ‰€ä»¥è¡Œä¸šä¸€å®šè¦é€‰å¥½ï¼Œç°åœ¨æ¢è¡Œä¸šå¤ªéš¾äº†ï¼Œç­‰å†è€ä¸€ç‚¹æ›´æ¢ä¸åŠ¨äº†ã€‚</p><p>ç°åœ¨æ˜¯æ¢åˆ°åŒ»ç–—å™¨æ¢°ï¼Œéƒ½è¯´æŒºå¥½çš„å·¥ä½œã€‚å°±æ˜¯è¿˜æ²¡å…¥é—¨ï¼Œå¤ªéš¾äº†ã€‚ã€‚ã€‚</p><p>æ–°çš„ä¸€å¹´ï¼ŒåŠ æ²¹ï¼</p><h2 id="ç»“å©š"><a href="#ç»“å©š" class="headerlink" title="ç»“å©š"></a>ç»“å©š</h2><p>è¿‡å¹´ä¹Ÿä»£è¡¨ç€è¦ç»“å©šäº†ï¼Œå¥½å¤šäº²æˆšéƒ½é—®æˆ‘ç»“å©šã€å‚¬æˆ‘ç»“å©šï¼Œåªèƒ½è¯´éš¾å•Šï¼</p><p>æœ‰ä¸ªå§¨é—®æˆ‘æœ‰ç›®æ ‡æ²¡ï¼Ÿæˆ‘è¡¨ç¤ºæ²¡æœ‰</p><p>â€œé‚£å·®çš„è¿œå“¦ï¼Œç›®æ ‡éƒ½æ²¡æœ‰ï¼Œæ€ä¹ˆåˆ°ç»“å©šã€‚â€</p><p>ç¡®å®æ˜¯æ²¡æœ‰æƒ³è°ˆå¥³æœ‹å‹çš„ç›®æ ‡ï¼Œä¸çŸ¥é“ä¸ºå•¥å­ï¼Œå¯èƒ½æ˜¯å•èº«ä¹…äº†ã€‚ã€‚ã€‚</p>]]></content>
    
    
    
    <tags>
      
      <tag>å°å¹´</tag>
      
      <tag>å¿«ä¹</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ—¶éš”åŠå¹´ï¼Œæˆ‘å›æ¥äº†</title>
    <link href="/2023/04/22/newshexo/"/>
    <url>/2023/04/22/newshexo/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h2 id="123"><a href="#123" class="headerlink" title="123"></a>123</h2><p>è‡ªä»æ”¹ç”¨hexoä»¥åï¼Œæ„Ÿè§‰æˆ‘çš„å°çªå°±åœ¨æµæµªäº†ï¼Œå¹³æ—¶æ²¡ä»€ä¹ˆæƒ³è¯´çš„ï¼Œç­‰æƒ³è¦æ›´æ–°ä¸€ç‚¹ä¸œè¥¿çš„æ—¶å€™ï¼Œå´å‘ç°æ‰¾ä¸åˆ°hexoæ–‡ä»¶åœ¨å“ªäº†ã€‚ã€‚ã€‚</p><p>ç¬¬ä¸€æ¬¡æµæµªçš„æœ€å½»åº•ï¼Œä»€ä¹ˆéƒ½æ²¡æœ‰å¤‡ä»½ï¼Œåªèƒ½é‡æ–°å†å†™ä¸€éæ–‡ç« äº†</p><p>è¿™æ¬¡è¿˜å¥½ï¼Œæˆ‘æœ‰å¤‡ä»½ï¼Œå¯æƒœä¹Ÿä¸æ˜¯æœ€æ–°çš„å¤‡ä»½</p><p>ä¸è¿‡è¿˜å¥½ï¼Œå·²ç»æœ‰ç»éªŒäº† git&gt;node&gt;hexoå¾ˆå¿«å°±æå¥½äº†</p><h2 id="äºŒåå…­ä¸ƒå…«"><a href="#äºŒåå…­ä¸ƒå…«" class="headerlink" title="äºŒåå…­ä¸ƒå…«"></a>äºŒåå…­ä¸ƒå…«</h2><p>ä¸çŸ¥ä¸è§‰å°±åˆ°äº†ï¼Œå¯è¿˜æ˜¯å¾ˆè¿·èŒ«</p><p>çœ‹ä¸åˆ°å‰é¢çš„è·¯å•Šï¼Œè¯¥æ€ä¹ˆèµ°å•Š</p><p>å‰å‡ å¹´å¾…åœ¨å®‰é€¸çš„åœ°æ–¹ï¼Œä¸€æ™ƒå°±è¿‡å»äº†</p><p>ä»Šå¹´å·²ç»æ¢åœ°æ–¹äº†ï¼ŒåŠ æ²¹</p>]]></content>
    
    
    
    <tags>
      
      <tag>æ— èŠ</tag>
      
      <tag>èºº</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æœ‰åºé˜Ÿåˆ—ï¼šqueue</title>
    <link href="/2023/04/22/youxu/"/>
    <url>/2023/04/22/youxu/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h2 id="æœ‰åºé˜Ÿåˆ—ï¼šqueue"><a href="#æœ‰åºé˜Ÿåˆ—ï¼šqueue" class="headerlink" title="æœ‰åºé˜Ÿåˆ—ï¼šqueue"></a>æœ‰åºé˜Ÿåˆ—ï¼šqueue</h2><p>åœ¨å¤§ä½¬åšå®¢å‘ç°çš„è¿™ä¸ªæœ‰åºé˜Ÿåˆ—ï¼ŒæŒºæœ‰æ„æ€çš„</p><p>Python queueæ¨¡å—çš„FIFOé˜Ÿåˆ—å…ˆè¿›å…ˆå‡ºã€‚ queue.Queue(maxsize)</p><p>LIFOç±»ä¼¼äºå †ï¼Œå³å…ˆè¿›åå‡ºã€‚ queue.LifoQueue(maxsize)</p><p>è¿˜æœ‰ä¸€ç§æ˜¯ä¼˜å…ˆçº§é˜Ÿåˆ—çº§åˆ«è¶Šä½è¶Šå…ˆå‡ºæ¥ã€‚ queue.PriorityQueue(maxsize)</p><h2 id="queue-PriorityQueue-maxsize"><a href="#queue-PriorityQueue-maxsize" class="headerlink" title="queue.PriorityQueue(maxsize)"></a>queue.PriorityQueue(maxsize)</h2><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs stylus">import queue<br><br><span class="hljs-selector-tag">q</span> = queue<span class="hljs-selector-class">.PriorityQueue</span>(<span class="hljs-number">5</span>)<br><span class="hljs-selector-tag">q</span><span class="hljs-selector-class">.put</span>((<span class="hljs-number">5</span>, <span class="hljs-number">5454</span>))<br><span class="hljs-selector-tag">q</span><span class="hljs-selector-class">.put</span>((<span class="hljs-number">2</span>, <span class="hljs-number">532566</span>))<br><span class="hljs-selector-tag">q</span><span class="hljs-selector-class">.put</span>((<span class="hljs-number">3</span>, <span class="hljs-number">555</span>))<br><span class="hljs-selector-tag">q</span><span class="hljs-selector-class">.put</span>((<span class="hljs-number">7</span>, <span class="hljs-number">344</span>))<br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(q.get()</span></span>)<br><span class="hljs-function"><span class="hljs-title">print</span><span class="hljs-params">(q.get()</span></span>)<br><br>-----------<br>(<span class="hljs-number">2</span>, <span class="hljs-number">532566</span>)<br>(<span class="hljs-number">3</span>, <span class="hljs-number">555</span>)<br></code></pre></td></tr></table></figure><h2 id="æˆ‘çš„py"><a href="#æˆ‘çš„py" class="headerlink" title="æˆ‘çš„py"></a>æˆ‘çš„py</h2><p>æŒ‰å°è¯´ç« èŠ‚IDæ’åºï¼ˆ1, â€˜â€¦â€™ï¼‰</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> time<br><span class="hljs-keyword">import</span> requests<br><span class="hljs-keyword">from</span> lxml <span class="hljs-keyword">import</span> etree<br><span class="hljs-keyword">from</span> multiprocessing.dummy <span class="hljs-keyword">import</span> Pool <span class="hljs-keyword">as</span> ThreadPool<br><span class="hljs-keyword">from</span> urllib.parse <span class="hljs-keyword">import</span> urljoin<br><span class="hljs-keyword">from</span> queue <span class="hljs-keyword">import</span> PriorityQueue<br><br><span class="hljs-comment"># æœ‰åºé˜Ÿåˆ—ï¼Œå¯ä»¥å…¨å±€ä½¿ç”¨, ç”¨æ¥å‚¨å­˜ç« èŠ‚å†…å®¹</span><br>queue = PriorityQueue()<br><span class="hljs-comment"># ç›®å½•é¡µurl</span><br>start_url = <span class="hljs-string">&#x27;http://www.ybiquge.com/95_95524/&#x27;</span><br>headers = &#123;<br>    <span class="hljs-string">&#x27;Accept&#x27;</span>: <span class="hljs-string">&#x27;text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9&#x27;</span>,<br>    <span class="hljs-string">&#x27;Accept-Language&#x27;</span>: <span class="hljs-string">&#x27;zh-CN,zh;q=0.9,en;q=0.8&#x27;</span>,<br>    <span class="hljs-string">&#x27;user-agent&#x27;</span>: <span class="hljs-string">&#x27;Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.141 Safari/537.36&#x27;</span><br>&#125;<br><br><br><span class="hljs-comment"># getURL</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_url</span>(<span class="hljs-params">url</span>):</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;è®¿é—®urlï¼š&#123;&#125;&quot;</span>.<span class="hljs-built_in">format</span>(url))<br>    <span class="hljs-keyword">try</span>:<br>        res = requests.get(url, headers)<br>        <span class="hljs-comment"># tree = etree.HTML(res)</span><br>        <span class="hljs-keyword">return</span> res.text<br>    <span class="hljs-keyword">except</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br><br><br><span class="hljs-comment"># è·å–å°è¯´ç« èŠ‚é“¾æ¥</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_page</span>():</span><br>    <span class="hljs-comment"># get</span><br>    page_html = get_url(start_url)<br>    <span class="hljs-keyword">if</span> page_html:<br>        <span class="hljs-comment"># lxmlè§£æ</span><br>        page_tree = etree.HTML(page_html)<br>        <span class="hljs-comment"># ä¹¦å</span><br>        book_name = page_tree.xpath(<span class="hljs-string">&#x27;//div[@id=&quot;info&quot;]/h1/text()&#x27;</span>)[<span class="hljs-number">0</span>]<br>        <span class="hljs-built_in">print</span>(book_name)<br>        <span class="hljs-comment"># ç« èŠ‚é“¾æ¥</span><br>        page_url_lists = page_tree.xpath(<span class="hljs-string">&#x27;//div[@id=&quot;list&quot;]/dl/dd/a/@href&#x27;</span>)<br>        <span class="hljs-keyword">return</span> book_name, page_url_lists<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br><br><br><span class="hljs-comment"># è·å–å°è¯´å†…å®¹</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_text</span>(<span class="hljs-params">url</span>):</span><br>    <span class="hljs-comment"># å…ˆæ‹¼æ¥URL</span><br>    url = urljoin(start_url, url)<br>    <span class="hljs-comment"># get</span><br>    zj_html = get_url(url)<br>    <span class="hljs-keyword">if</span> zj_html:<br>        <span class="hljs-comment"># lxmlè§£æ</span><br>        page_tree = etree.HTML(zj_html)<br>        <span class="hljs-comment"># ç« èŠ‚å</span><br>        zj_name = page_tree.xpath(<span class="hljs-string">&#x27;//div[@class=&quot;bookname&quot;]/h1/text()&#x27;</span>)[<span class="hljs-number">0</span>]<br>        <span class="hljs-built_in">print</span>(zj_name)<br>        <span class="hljs-comment"># å†…å®¹</span><br>        zj_text_list = page_tree.xpath(<span class="hljs-string">&#x27;//div[@id=&quot;content&quot;]/text()&#x27;</span>)<br>        <span class="hljs-comment"># éå†åˆå¹¶å†…å®¹</span><br>        zj_text = <span class="hljs-string">&#x27;&#x27;</span><br>        <span class="hljs-keyword">for</span> text <span class="hljs-keyword">in</span> zj_text_list:<br>            zj_text = zj_text + text + <span class="hljs-string">&#x27;\n&#x27;</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;å†…å®¹:&#x27;</span>, zj_text[<span class="hljs-number">0</span>:<span class="hljs-number">15</span>], <span class="hljs-string">&#x27;...&#x27;</span>)<br>        <span class="hljs-comment"># æœ‰åºåˆ—é˜Ÿæäº¤</span><br>        <span class="hljs-comment"># åŒ¹é…ç« èŠ‚id</span><br>        zj_id = url.split(<span class="hljs-string">&#x27;/&#x27;</span>)[-<span class="hljs-number">1</span>].replace(<span class="hljs-string">&#x27;.html&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>)<br>        <span class="hljs-comment"># å¼€å§‹æäº¤, åºå·+å†…å®¹</span><br>        queue.put((<span class="hljs-built_in">int</span>(zj_id), zj_name+<span class="hljs-string">&#x27;\n&#x27;</span>+zj_text+<span class="hljs-string">&#x27;\n&#x27;</span>))<br>        <span class="hljs-comment"># è®¾ç½®å»¶è¿Ÿï¼ˆç†æ€§ä¸€ç‚¹ï¼‰</span><br>        time.sleep(<span class="hljs-number">1</span>)<br><br><br><span class="hljs-comment"># ä¸‹è½½</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">down_text</span>(<span class="hljs-params">name, texts</span>):</span><br>    path = name + <span class="hljs-string">&#x27;.txt&#x27;</span><br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(path, <span class="hljs-string">&#x27;a&#x27;</span>, encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>) <span class="hljs-keyword">as</span> a:<br>        a.writelines(texts)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    start_time = time.time()<br>    <span class="hljs-comment"># è·å–å°è¯´åå­—ï¼Œç« èŠ‚é“¾æ¥list</span><br>    xs_book_name, zj_lists = get_page()<br>    <span class="hljs-comment"># å®ä¾‹åŒ– Pool å¯¹è±¡,è®¾ç½®çº¿ç¨‹4</span><br>    pool = ThreadPool(<span class="hljs-number">4</span>)<br>    <span class="hljs-comment"># è®¾ç½®ä»»åŠ¡</span><br>    pool.<span class="hljs-built_in">map</span>(get_text, zj_lists)<br>    <span class="hljs-comment"># å…³é—­çº¿ç¨‹</span><br>    pool.close()<br>    pool.join()<br>    <span class="hljs-comment"># æœ‰åºè·å–ç« èŠ‚å†…å®¹</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;æ­£åœ¨ä¿å­˜å°è¯´ï¼Œè¯·ç¨å...&quot;</span>)<br>    content = <span class="hljs-string">&quot;&quot;</span><br>    <span class="hljs-comment"># queue.empty() å¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œè¿”å›True</span><br>    <span class="hljs-keyword">while</span> <span class="hljs-keyword">not</span> queue.empty():<br>        <span class="hljs-comment"># getæœ‰åºè·å–</span><br>        next_obj = queue.get()<br>        <span class="hljs-comment"># print(next_obj[0])</span><br>        content += next_obj[<span class="hljs-number">1</span>]<br>    <span class="hljs-comment"># ä¿å­˜</span><br>    down_text(xs_book_name, content)<br>    <span class="hljs-built_in">print</span>(xs_book_name, <span class="hljs-string">&quot;ä¸‹è½½å®Œæˆï¼&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;å…±ç”¨æ—¶ï¼š&quot;</span>, time.time()-start_time)<br></code></pre></td></tr></table></figure><h2 id="å†™åœ¨åé¢"><a href="#å†™åœ¨åé¢" class="headerlink" title="å†™åœ¨åé¢"></a>å†™åœ¨åé¢</h2><p>ä¸çŸ¥ä¸è§‰å†™äº†å¥½å¤šä¸‹è½½å°è¯´çš„pyäº†</p><p>çˆ±å¥½çœ‹å°è¯´ï¼Œæ²¡åˆ«çš„æ„æ€ï¼</p>]]></content>
    
    
    
    <tags>
      
      <tag>python3</tag>
      
      <tag>queue</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>é•¿æœŸå•èº«çš„çŠ¶æ€</title>
    <link href="/2023/04/20/dangshendog/"/>
    <url>/2023/04/20/dangshendog/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h2 id="éšä¾¿èŠèŠ"><a href="#éšä¾¿èŠèŠ" class="headerlink" title="éšä¾¿èŠèŠ"></a>éšä¾¿èŠèŠ</h2><p>å‰å‡ å¤©å’ŒåŒäº‹èŠå¤©ï¼Œé—®æˆ‘å•èº«è¿™ä¹ˆå¤šå¹´æ˜¯ä»€ä¹ˆæ„Ÿè§‰ï¼Ÿæœ‰æ²¡æœ‰ä»€ä¹ˆæƒ³æ³•ï¼Ÿ</p><p>æˆ‘çš„å›ç­”æ˜¯æ²¡ä»€ä¹ˆæƒ³æ³•</p><p>é‚£é•¿æœŸå•èº«æ˜¯ä»€ä¹ˆçš„çŠ¶æ€å‘¢ï¼Ÿ</p><p>å°±æ˜¯æ¸¸æˆä¹Ÿæ‰“è…»äº†</p><p>å¾®ä¿¡ä¹Ÿä¸å¼¹æ¶ˆæ¯</p><p>æ¯å¤©åˆ·ç€bç«™</p><p>æ—¶è€Œè¢«æ–‡æ¡ˆè§¦åŠ¨</p><p>æ—¶è€Œè¢«è§†é¢‘è™ç‹—</p><p>è™½ç„¶å­¤ç‹¬ï¼Œä½†ä¸æƒ³æ‰¾</p><p>å–œæ¬¢æˆ‘çš„æ²¡æœ‰</p><p>æˆ‘å–œæ¬¢çš„ï¼Œä¸å–œæ¬¢æˆ‘</p><p>å’Œåˆšè®¤è¯†çš„å¥³ç”Ÿ</p><p>èŠå‡ å¥å¤©ï¼Œå°±æŠŠå¤©èŠæ­»äº†</p><p>æ„Ÿè§‰ï¼Œè‡ªå·±å¤±å»äº†çˆ±çš„èƒ½åŠ›</p><p>å…¶å®ä¹Ÿä¸æ˜¯ä¸æƒ³è°ˆæ‹çˆ±</p><p>æœ‰çš„æ—¶å€™æ˜¯å®³æ€•</p><p>æ€•æ¸£å¥³ï¼Œæ€•å½©ç¤¼</p><p>æ€•è¢«è¾œè´Ÿ</p><p>æ€•æ²¡é’±è®©å¥¹å—å§”å±ˆ</p><p>å› ä¸ºæ²¡æœ‰æŠŠæ¡ç•™åœ¨ä¸€ä¸ªäºº</p><p>æ‰€ä»¥æ‰æ²¡æœ‰å‹‡æ°”ç†ç›´æ°”å£®çš„è¯´</p><p>è·Ÿç€æˆ‘ä¸€å®šä¼šè®©ä½ å¹¸ç¦</p><p>æ‰€ä»¥å®æ„¿å•èº«</p><p>æŠ“ä¸ä½çš„ä¸œè¥¿</p><p>è¿ä¼¸æ‰‹éƒ½æ˜¯å¤šä½™çš„</p><p>2022.2.16</p><h2 id="æ¥å¬é¦–æ­Œå§ï¼"><a href="#æ¥å¬é¦–æ­Œå§ï¼" class="headerlink" title="æ¥å¬é¦–æ­Œå§ï¼"></a>æ¥å¬é¦–æ­Œå§ï¼</h2><iframe src="//player.bilibili.com/player.html?aid=509077745&bvid=BV1Vu411R7wg&cid=508654716&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" width='100%' height='100%'> </iframe><p>è½¬è½½æ¥è‡ªbç«™upä¸»é¬¼å±±å“¥çš„ä½œå“</p>]]></content>
    
    
    
    <tags>
      
      <tag>å•èº«</tag>
      
      <tag>ç‹—</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æˆ‘è¿™æ˜¯æ€ä¹ˆäº†</title>
    <link href="/2021/11/02/rji-1102/"/>
    <url>/2021/11/02/rji-1102/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h2 id="å°è®°"><a href="#å°è®°" class="headerlink" title="å°è®°"></a>å°è®°</h2><p>é‚£æ˜¯ä¸€ä¸ªæ˜ŸæœŸå¤©çš„æ™šä¸Šï¼Œå·®ä¸å¤š10ç‚¹å·¦å³å§ï¼Œåœ¨ç½‘å§å¥‹æˆ˜ä¸€å¤©çš„æˆ‘å’Œå°åˆ˜ç»ˆæ˜¯ä¸‹æœºäº†ã€‚</p><p>å’Œå¾€å¸¸ä¸€æ ·ï¼Œå¤§éƒ½æ˜¯ä¸€æ ·çš„ï¼Œå‘¨ä¸€è‡³å‘¨å…­ä¸Šç­ï¼Œæ˜ŸæœŸå¤©éƒ½æ˜¯åœ¨ç½‘å§åº¦è¿‡ï¼Œè™šåº¦å…‰é˜´ä¹Ÿå¥½ï¼Œæ²‰è¿·æ¸¸æˆä¹Ÿç½¢ï¼Œéƒ½æ˜¯è‡ªå·±çš„å–œå¥½ã€‚</p><p>èµ°åœ¨å¤–é¢çš„è¡—é“ï¼Œå´è¿˜åœ¨å¤ç›˜ç€ä»Šå¤©çš„æˆ˜æ–—ï¼Œå“ªè·¯ç©çš„å¾ˆå¥½ï¼Œå“ªè·¯ååˆ†çš„å‘ï¼Œä»–å¤§åº•æ˜¯ç©çš„å¾ˆå¥½çš„ï¼Œæˆ‘ç©çš„æ˜¯è¾…åŠ©</p><p>æ…¢æ…¢å¿«èµ°åˆ°å°åŒºé—¨å£äº†ï¼Œé—¨å£è§ä¸¤ä¸ªå°å§å§æ‹¿ç€é—¨ç¦åœ¨åˆ·ï¼Œé‚£æœºå™¨åªæ˜¯å‘å‡ºæ»´æ»´ä¸¤å£°ï¼Œå´å¹¶ä¸å¼€é—¨ï¼Œåº”è¯¥æ˜¯åäº†å§ï¼</p><p>è¦ä¸è¦å»å¸®å¿™ï¼Ÿæˆ‘æœ‰ç‚¹çŠ¹è±«ï¼Œå¿ƒé‡Œæƒ³ç€è¿˜è¦å»å°å–éƒ¨ä¹°ç‚¹ä¸œè¥¿çš„ã€‚</p><p>æ—è¾¹å°åˆ˜èµ°äº†è¿‡å»ï¼Œæ‹¿ç€è‡ªå·±çš„é—¨ç¦å¸®å¿™å¼€é—¨ï¼Œå¹¶å‘Šè¯‰å¥¹ä»¬è¦å»å°åŒºé‚£é‡Œæ¿€æ´»ã€‚</p><p>æ˜¯å› ä¸ºå†…å‘å—ï¼Ÿè¿˜åœ¨åªå› ä¸ºå¥¹ä»¬æ˜¯å¥³å­©å­ï¼Ÿ</p><p>æˆ‘åº”è¯¥æ˜¯æ€•äº†ï¼Œä¸çŸ¥ä¸ºä½•ï¼Œå½“æˆ‘é‡åˆ°å°å§å§çš„ç¬¬ä¸€ååº”ç«Ÿç„¶æ˜¯å®³æ€•çš„ã€‚</p><p>ä¸æƒ³æœ‰è¿‡å¤šäº¤é™…ï¼Œè¿™æ˜¯å®³ç¾å—ï¼Ÿ</p><p>æˆ‘åº”è¯¥æ˜¯åºŸäº†</p><p align="right">2021.11.2</p>]]></content>
    
    
    
    <tags>
      
      <tag>æ—¥è®°</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>python3å¤šçº¿ç¨‹ä¸‹è½½è§†é¢‘</title>
    <link href="/2021/09/18/thread/"/>
    <url>/2021/09/18/thread/</url>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>éšç€è¦ä¸‹è½½çš„è§†é¢‘è¶Šæ¥è¶Šå¤šï¼Œçªç„¶å‘ç°æˆ‘ä¹‹å‰å†™çš„é‚£ä¸ªm3u8ä¸‹è½½é€Ÿåº¦å¤ªæ…¢äº†â€¦</p><p>åˆšå¥½åœ¨å…¬ä¼—å·<a href="https://mp.weixin.qq.com/s/97cY7NNnZOyG46bWQUaGTQ">ç®€è¯´python</a>ä¸Šçœ‹åˆ°ä¸€ä¸ªå¤šçº¿ç¨‹æ•™ç¨‹ï¼Œå°±æ¥è¯•è¯•ç”¨å¤šçº¿ç¨‹ä¸‹è½½ä¸€ä¸‹å§ï¼</p><h2 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><p>å¤šçº¿ç¨‹æ˜¯ç”¨threadingåº“æ¥å®ç°ï¼ŒåŸºç¡€çš„æ¯”è¾ƒç®€å•ï¼Œä¸»è¦æ˜¯è¦æ³¨æ„é™åˆ¶çº¿ç¨‹æ•°é‡</p><p><img src="https://cdn.jsdelivr.net/gh/qiuliqi/qiuliqi.github.io@master/img/20210918151954.png"></p><p>ç¾¤é‡Œå¼€è½¦ç°åœ¨éƒ½æ˜¯å‘ä¸€å †äºŒç»´ç ,æ‰€ä»¥è¿˜å¾—ç”¨ä¸ªäºŒç»´ç è¯†åˆ«zxingåº“</p><p>æŠŠäºŒç»´ç éƒ½ä¿å­˜åœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œç„¶åå¯åŠ¨pyï¼Œé€‰æ‹©è¿™ä¸ªæ–‡ä»¶å¤¹å°±å¯ä»¥è‡ªåŠ¨ä¸‹è½½å•¦ï¼</p><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> time<br><span class="hljs-keyword">import</span> threading<br><span class="hljs-keyword">from</span> faker <span class="hljs-keyword">import</span> Faker<br><span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> filedialog<br><span class="hljs-keyword">from</span> tkinter <span class="hljs-keyword">import</span> messagebox<br><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> zxing<br><br><br><span class="hljs-comment"># åˆå§‹åŒ–</span><br>fake = Faker()<br><br><br><span class="hljs-comment"># è·å–m3u8ä¸‹è½½é“¾æ¥</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_ts_urls</span>(<span class="hljs-params">m3u8_index</span>):</span><br>    <span class="hljs-comment"># å‚¨å­˜m3u8é“¾æ¥</span><br>    m3u8_url_list = []<br><br>    <span class="hljs-keyword">try</span>:<br>        <span class="hljs-comment"># å®šä¹‰è¯·æ±‚å¤´</span><br>        headers = &#123;<span class="hljs-string">&#x27;User-Agent&#x27;</span>: fake.user_agent()&#125;<br>        <span class="hljs-comment"># getè·å–</span><br>        m3u8s = requests.get(m3u8_index, headers).text<br>        <span class="hljs-comment"># æ‹†åˆ†</span><br>        m3u8s = m3u8s.strip()<br>        m3u8s = m3u8s.split(<span class="hljs-string">&#x27;\n&#x27;</span>)<br>        <span class="hljs-comment"># print(m3u8s)</span><br>        <span class="hljs-keyword">for</span> m3u8 <span class="hljs-keyword">in</span> m3u8s:<br>            <span class="hljs-comment"># print(m3u8)</span><br>            <span class="hljs-comment"># åˆ¤æ–­ #</span><br>            <span class="hljs-keyword">if</span> m3u8.find(<span class="hljs-string">&#x27;#&#x27;</span>) == -<span class="hljs-number">1</span>:<br>                <span class="hljs-comment"># print(m3u8)</span><br>                <span class="hljs-comment"># è·å–å‰ç¼€</span><br>                m3u8_server = url_m3u8_index.replace(url_m3u8_index.split(<span class="hljs-string">&#x27;/&#x27;</span>)[-<span class="hljs-number">1</span>], <span class="hljs-string">&#x27;&#x27;</span>)<br>                <span class="hljs-comment"># åˆå¹¶</span><br>                m3u8_url = m3u8_server + m3u8<br>                <span class="hljs-comment"># print(m3u8_url)</span><br>                <span class="hljs-comment"># æ·»åŠ åˆ° list</span><br>                m3u8_url_list.append(m3u8_url)<br>        <span class="hljs-built_in">print</span>(m3u8_url_list)<br>        <span class="hljs-keyword">return</span> m3u8_url_list<br>    <span class="hljs-keyword">except</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;urlè®¿é—®å‡ºé”™&#x27;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br><br><br><span class="hljs-comment"># ä¸‹è½½è§†é¢‘</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">down_m3u8</span>(<span class="hljs-params">url</span>):</span><br>    <span class="hljs-keyword">try</span>:<br>        <span class="hljs-comment"># å®šä¹‰éšæœºè¯·æ±‚å¤´</span><br>        headers = &#123;<span class="hljs-string">&#x27;User-Agent&#x27;</span>: fake.user_agent()&#125;<br>        res = requests.get(url, headers).content<br>        <span class="hljs-keyword">try</span>:<br>            os.mkdir(<span class="hljs-string">&#x27;ä¸´æ—¶ä¸‹è½½æ–‡ä»¶å¤¹&#x27;</span>)<br>        <span class="hljs-keyword">except</span>:<br>            <span class="hljs-keyword">pass</span><br>        ts_name = <span class="hljs-string">&#x27;ä¸´æ—¶ä¸‹è½½æ–‡ä»¶å¤¹/&#x27;</span> + url.split(<span class="hljs-string">&#x27;/&#x27;</span>)[-<span class="hljs-number">1</span>]<br>        ts_names.append(ts_name)<br>        <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(ts_name, <span class="hljs-string">&#x27;wb&#x27;</span>) <span class="hljs-keyword">as</span> f:<br>            f.write(res)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;å¼€å§‹ä¸‹è½½&#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(ts_name))<br>    <span class="hljs-keyword">except</span>:<br>        <span class="hljs-keyword">pass</span><br>    <span class="hljs-comment"># çº¿ç¨‹ç»“æŸé”</span><br>    pool_sema.release()<br><br><br><span class="hljs-comment"># åˆå¹¶è§†é¢‘</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">mg_vd</span>():</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;åˆå¹¶è§†é¢‘ä¸­...&#x27;</span>)<br>    t = time.strftime(<span class="hljs-string">&quot;%Y.%m.%d.%H.%M.%S&quot;</span>, time.localtime())<br>    file_path = <span class="hljs-built_in">str</span>(t) + <span class="hljs-string">&#x27;.ts&#x27;</span><br>    <span class="hljs-comment"># å…ˆæ’åº</span><br>    sd_ts_names = <span class="hljs-built_in">sorted</span>(ts_names)<br>    <span class="hljs-built_in">print</span>(sd_ts_names)<br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(file_path, <span class="hljs-string">&#x27;wb&#x27;</span>) <span class="hljs-keyword">as</span> fl:<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> sd_ts_names:<br>            fl.write(<span class="hljs-built_in">open</span>(i, <span class="hljs-string">&#x27;rb&#x27;</span>).read())<br>            <span class="hljs-comment"># åˆ é™¤åŸè§†é¢‘</span><br>            os.remove(i)<br>        <span class="hljs-comment"># åˆ é™¤æ–‡ä»¶å¤¹</span><br>        <span class="hljs-keyword">try</span>:<br>            os.rmdir(<span class="hljs-string">&#x27;ä¸´æ—¶ä¸‹è½½æ–‡ä»¶å¤¹&#x27;</span>)<br>        <span class="hljs-keyword">except</span>:<br>            <span class="hljs-keyword">pass</span><br><br><br><span class="hljs-comment"># è¯†åˆ«äºŒç»´ç </span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">dg_code</span>():</span><br>    <span class="hljs-comment"># åˆ›å»ºè¯†åˆ«åˆ°çš„é“¾æ¥list</span><br>    urls = []<br>    <span class="hljs-comment"># è·å–äºŒç»´ç å‚¨å­˜æ–‡ä»¶å¤¹</span><br>    thread1 = threading.Thread(target=read_dir)<br>    thread1.start()<br>    thread1.join()<br>    <span class="hljs-comment"># éå†æ–‡ä»¶å¤¹</span><br>    code_path = code_paths[<span class="hljs-number">0</span>]<br>    imgs = os.listdir(code_path)<br>    <span class="hljs-comment"># print(imgs)</span><br>    <span class="hljs-keyword">for</span> img <span class="hljs-keyword">in</span> imgs:<br>        img_path = os.path.join(code_path, img)<br>        <span class="hljs-comment"># å¼€å§‹è¯†åˆ«äºŒç»´ç </span><br>        reader = zxing.BarCodeReader()<br>        barcode = reader.decode(img_path)<br>        url = barcode.parsed<br>        <span class="hljs-comment"># print(url)</span><br>        <span class="hljs-comment"># åŠ å…¥list</span><br>        urls.append(url)<br><br>    <span class="hljs-built_in">print</span>(urls)<br>    <span class="hljs-keyword">return</span> urls<br><br><br><span class="hljs-comment"># è¯»å–æ–‡ä»¶å¤¹</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">read_dir</span>():</span><br>    <span class="hljs-comment"># é€‰æ‹©äºŒç»´ç æ‰€åœ¨æ–‡ä»¶å¤¹</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;è¯·å…ˆé€‰æ‹©äºŒç»´ç æ‰€åœ¨çš„æ–‡ä»¶å¤¹&#x27;</span>)<br>    code_path = filedialog.askdirectory()  <span class="hljs-comment"># é€‰æ‹©æ–‡ä»¶å¤¹ï¼Œè·¯å¾„ä¿å­˜äºfoldr_patchä¸­</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> code_path:<br>        messagebox.showerror(<span class="hljs-string">&quot;æç¤º&quot;</span>, <span class="hljs-string">&quot;è¯·å…ˆé€‰æ‹©äºŒç»´ç æ‰€åœ¨çš„æ–‡ä»¶å¤¹&quot;</span>)<br>        read_dir()<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;é€‰æ‹©æ–‡ä»¶å¤¹ï¼š&#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(code_path))<br>        code_paths.append(code_path)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    <span class="hljs-comment"># m3u8url</span><br>    <span class="hljs-comment"># è¯†åˆ«äºŒç»´ç </span><br>    code_paths = []<br>    urls_m3u8_index = dg_code()<br>    <span class="hljs-keyword">for</span> url_m3u8_index <span class="hljs-keyword">in</span> urls_m3u8_index:<br>        <span class="hljs-comment"># è·å–ä¸‹è½½url</span><br>        m3u8_urls = get_ts_urls(url_m3u8_index)<br>        <span class="hljs-comment"># å‚¨å­˜ä¸´æ—¶è§†é¢‘è·¯å¾„list</span><br>        ts_names = []<br>        <span class="hljs-keyword">if</span> m3u8_urls:<br>            <span class="hljs-comment"># print(m3u8_urls)</span><br>            <span class="hljs-comment"># çº¿ç¨‹list</span><br>            thread_list = []<br>            <span class="hljs-comment"># ç®¡ç†çº¿ç¨‹æ•°</span><br>            max_connections = <span class="hljs-number">5</span><br>            pool_sema = threading.BoundedSemaphore(max_connections)<br><br>            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> m3u8_urls:<br>                <span class="hljs-comment"># çº¿ç¨‹å¼€å§‹é”</span><br>                pool_sema.acquire()<br>                thread = threading.Thread(target=down_m3u8, args=[i])<br>                thread.start()<br>                thread_list.append(thread)<br><br>            <span class="hljs-keyword">for</span> t <span class="hljs-keyword">in</span> thread_list:<br>                t.join()<br><br>            <span class="hljs-comment"># åˆå¹¶è§†é¢‘</span><br>            mg_vd()<br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;ä¸‹è½½å®Œæˆ&#x27;</span>)<br></code></pre></td></tr></table></figure><h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>ä»…ä¾›å­¦ä¹ äº¤æµï¼Œå’³å’³å’³</p>]]></content>
    
    
    
    <tags>
      
      <tag>python3</tag>
      
      <tag>m3u8</tag>
      
      <tag>å¤šçº¿ç¨‹</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>bç«™æ¯å¤©è‡ªåŠ¨æŠ•å¸ä¸‰è¿ï¼Œè½»æ¾è·å–60ç»éªŒå€¼</title>
    <link href="/2021/08/04/blbltb/"/>
    <url>/2021/08/04/blbltb/</url>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ä»Šå¤©åœ¨ç©bç«™çš„æ—¶å€™å‘ç°è‡ªå·±å¿«è¦åˆ°6çº§å¤§ä½¬äº†ï¼Œå°æœ¬æœ¬è®¡ç®—ä¸€ä¸‹ï¼Œä¹Ÿå°±å·®ä¸ª5åƒå¤šç»éªŒâ€¦</p><p><img src="https://cdn.jsdelivr.net/gh/qiuliqi/qiuliqi.github.io@master/img/20210804111647.png"></p><p>å¯æ˜¯è‡ªå·±ç™½å«–ä¹ æƒ¯äº†ï¼Œä¹Ÿä¸æ€ä¹ˆæŠ•å¸ï¼Œæ‰€ä»¥ç­‰çº§å‡çš„éå¸¸æ…¢ï¼Œå’Œæˆ‘ä¸€èµ·å…¥å­¦çš„éƒ½å·²ç»æ˜¯6çº§å¤§ä½¬äº†</p><p>çœ‹äº†ä¸€ä¸‹bç«™çš„å‡çº§ä»»åŠ¡ï¼Œæ¯å¤©æŠ•å¸æ˜¯ä¸èƒ½å°‘çš„ï¼Œåˆšå¥½æœ€è¿‘å¯¹seleniumç©çš„æ¯”è¾ƒå—¨ï¼Œå°±æƒ³åšä¸€ä¸ªæ¯å¤©è‡ªåŠ¨å¸®æˆ‘æŠ•å¸çš„py</p><p><img src="https://cdn.jsdelivr.net/gh/qiuliqi/qiuliqi.github.io@master/img/20210804105703.png"></p><h2 id="æƒ³è¦çš„åŠŸèƒ½"><a href="#æƒ³è¦çš„åŠŸèƒ½" class="headerlink" title="æƒ³è¦çš„åŠŸèƒ½"></a>æƒ³è¦çš„åŠŸèƒ½</h2><p>1.è‡ªåŠ¨ç™»å½•bç«™</p><p>2.éšæœºè§‚çœ‹å‡ ä¸ªè§†é¢‘å¹¶ä¸”å¸®æˆ‘æŠ•å¸</p><h2 id="æˆ‘å†™çš„ä»£ç "><a href="#æˆ‘å†™çš„ä»£ç " class="headerlink" title="æˆ‘å†™çš„ä»£ç "></a>æˆ‘å†™çš„ä»£ç </h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> selenium <span class="hljs-keyword">import</span> webdriver<br><span class="hljs-keyword">from</span> selenium.webdriver.common.by <span class="hljs-keyword">import</span> By<br><span class="hljs-keyword">from</span> selenium.webdriver.support <span class="hljs-keyword">import</span> expected_conditions <span class="hljs-keyword">as</span> EC<br><span class="hljs-keyword">from</span> selenium.webdriver.support.wait <span class="hljs-keyword">import</span> WebDriverWait<br><span class="hljs-keyword">from</span> selenium.webdriver <span class="hljs-keyword">import</span> ActionChains<br><span class="hljs-keyword">import</span> time<br><span class="hljs-keyword">from</span> PIL <span class="hljs-keyword">import</span> Image<br><span class="hljs-keyword">import</span> json<br><span class="hljs-keyword">import</span> random<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CrackSlider</span>():</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-built_in">super</span>(CrackSlider, self).__init__()<br>        <span class="hljs-comment"># åˆå§‹ url</span><br>        self.start_url = <span class="hljs-string">&#x27;https://www.bilibili.com/&#x27;</span><br>        <span class="hljs-comment"># ç™»å½• url</span><br>        self.login_url = <span class="hljs-string">&#x27;https://passport.bilibili.com/login&#x27;</span><br>        <span class="hljs-comment"># æ­¤æ­¥éª¤å¾ˆé‡è¦ï¼Œè®¾ç½®ä¸ºå¼€å‘è€…æ¨¡å¼ï¼Œé˜²æ­¢è¢«å„å¤§ç½‘ç«™è¯†åˆ«å‡ºæ¥</span><br>        self.options = webdriver.ChromeOptions()<br>        self.options.add_experimental_option(<span class="hljs-string">&#x27;excludeSwitches&#x27;</span>, [<span class="hljs-string">&#x27;enable-automation&#x27;</span>])<br>        self.options.add_experimental_option(<span class="hljs-string">&#x27;useAutomationExtension&#x27;</span>, <span class="hljs-literal">False</span>)<br>        <span class="hljs-comment"># è®¾ç½®æ— å¤´æ¨¡å¼ï¼Œå°±æ˜¯ä¸æ˜¾ç¤ºæµè§ˆå™¨ï¼Œæµ‹è¯•æ—¶å¯ä»¥æ³¨é‡Šæ‰</span><br>        self.options.add_argument(<span class="hljs-string">&#x27;--headless&#x27;</span>)<br><br>        self.driver = webdriver.Chrome(options=self.options)<br>        self.driver.execute_cdp_cmd(<span class="hljs-string">&#x27;Page.addScriptToEvaluateOnNewDocument&#x27;</span>, &#123;<br>            <span class="hljs-string">&#x27;source&#x27;</span>: <span class="hljs-string">&#x27;Object.defineProperty(navigator, &quot;webdriver&quot;, &#123;get: () =&gt; undefined&#125;)&#x27;</span><br>        &#125;)<br>        self.driver.set_window_size(<span class="hljs-number">1366</span>, <span class="hljs-number">768</span>)<br>        <span class="hljs-comment"># self.driver.maximize_window()  # å…¨å±</span><br>        <span class="hljs-comment"># ç­‰å¾…åŠ è½½å…ƒç´ ï¼Œæœ€å¤š10s</span><br>        self.wait = WebDriverWait(self.driver, <span class="hljs-number">10</span>)<br><br>    <span class="hljs-comment"># è·å–å¹¶ä¿å­˜cookie</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">save_cookie</span>(<span class="hljs-params">self</span>):</span><br>        self.driver.get(self.login_url)<br>        <span class="hljs-comment"># ç½‘é¡µå…ƒç´ æˆªå›¾</span><br>        usercode_img = WebDriverWait(self.driver, <span class="hljs-number">20</span>).until(<br>            EC.presence_of_element_located(<br>                (By.CLASS_NAME, <span class="hljs-string">&#x27;qrcode-img&#x27;</span>)<br>            )<br>        )<br>        self.driver.save_screenshot(<span class="hljs-string">&#x27;screenshot.png&#x27;</span>) <span class="hljs-comment"># æˆªå…¨å›¾</span><br>        left = usercode_img.location[<span class="hljs-string">&#x27;x&#x27;</span>]<br>        top = usercode_img.location[<span class="hljs-string">&#x27;y&#x27;</span>]<br>        rigth = usercode_img.location[<span class="hljs-string">&#x27;x&#x27;</span>] + usercode_img.size[<span class="hljs-string">&#x27;width&#x27;</span>]<br>        bottom = usercode_img.location[<span class="hljs-string">&#x27;y&#x27;</span>] + usercode_img.size[<span class="hljs-string">&#x27;height&#x27;</span>]<br><br>        im = Image.<span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;screenshot.png&#x27;</span>)<br>        im = im.crop((left, top, rigth, bottom)) <span class="hljs-comment"># å¯¹æµè§ˆå™¨æˆªå›¾è¿›è¡Œè£å‰ª</span><br>        im.save(<span class="hljs-string">&#x27;vcode.png&#x27;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;è¯·æ‰«ç ç™»å½•&#x27;</span>)<br>        time.sleep(<span class="hljs-number">2</span>)<br>        <span class="hljs-comment"># æ‰“å¼€å›¾ç‰‡æ‰«ç ç™»å½•</span><br>        img=Image.<span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;vcode.png&#x27;</span>)<br>        img.show()<br>        <span class="hljs-comment"># æ£€æµ‹æ˜¯å¦ç™»å½•æˆåŠŸ</span><br>        current_url = self.login_url<br>        <span class="hljs-keyword">while</span> current_url:<br>            <span class="hljs-keyword">if</span> self.driver.current_url != current_url:<br>                current_url = <span class="hljs-literal">False</span><br>            time.sleep(<span class="hljs-number">3</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;ç™»å½•æˆåŠŸï¼Œæ­£åœ¨ä¿å­˜cookies&#x27;</span>)<br>        cookies = self.driver.get_cookies()<br>        json_cookies = json.dumps(cookies)<br>        <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;cookies_blbl.json&#x27;</span>, <span class="hljs-string">&#x27;w&#x27;</span>) <span class="hljs-keyword">as</span> f:<br>            f.write(json_cookies)<br><br>    <span class="hljs-comment"># è¯»å–cookies</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">add_cookie</span>(<span class="hljs-params">self</span>):</span><br>        self.driver.delete_all_cookies()<br>        <span class="hljs-keyword">try</span>:<br>            <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;cookies_blbl.json&#x27;</span>, <span class="hljs-string">&#x27;r&#x27;</span>, encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>) <span class="hljs-keyword">as</span> f:<br>                list_cookies = json.loads(f.read())<br>                <span class="hljs-comment"># print(list_cookies)</span><br>                <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> list_cookies:<br>                    self.driver.add_cookie(i)<br>        <span class="hljs-keyword">except</span>:<br>            self.save_cookie()<br><br>    <span class="hljs-comment"># ç™»å½•</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">logo</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;å¼€å§‹ç™»å½•ä¸­...&#x27;</span>)<br>        self.driver.get(self.login_url)<br>        self.add_cookie()<br>        self.driver.get(self.start_url)<br>        time.sleep(<span class="hljs-number">3</span>)<br>        <span class="hljs-comment"># æ£€æµ‹æ˜¯å¦ç™»å½•æˆåŠŸ</span><br>        <span class="hljs-keyword">if</span> self.driver.current_url != self.start_url:<br>            self.save_cookie()<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;ä½¿ç”¨cookiesç™»å½•æˆåŠŸ&#x27;</span>)<br><br>    <span class="hljs-comment"># éšæœºçœ‹è§†é¢‘</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">look_b</span>(<span class="hljs-params">self</span>):</span><br>        sp_list = []<br>        self.driver.get(<span class="hljs-string">&#x27;https://www.bilibili.com/v/popular/rank/all&#x27;</span>)<br>        time.sleep(<span class="hljs-number">3</span>)<br>        sps = self.driver.find_elements_by_xpath(<span class="hljs-string">&#x27;//ul[@class=&quot;rank-list&quot;]/li/div[2]/div[2]/a&#x27;</span>)<br>        <span class="hljs-keyword">for</span> sp <span class="hljs-keyword">in</span> sps:<br>            sp_url = sp.get_attribute(<span class="hljs-string">&#x27;href&#x27;</span>)<br>            <span class="hljs-comment"># print(sp_url)</span><br>            sp_list.append(sp_url)<br>        <span class="hljs-comment"># éšæœºè§‚çœ‹6ä¸ªè§†é¢‘</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">7</span>):<br>            <span class="hljs-comment"># éšæœºæ•°</span><br>            sjh = random.randint(<span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(sp_list) - <span class="hljs-number">1</span>)<br>            self.driver.get(sp_list[sjh])<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;å¼€å§‹å‰å¾€&#123;&#125;çœ‹è§†é¢‘ä¸‰è¿&#x27;</span>.<span class="hljs-built_in">format</span>(sp_list[sjh]))<br>            <span class="hljs-comment"># éšæœºæ—¶é—´ä¸‰è¿</span><br>            time.sleep(random.randint(<span class="hljs-number">5</span>,<span class="hljs-number">10</span>))<br>            <span class="hljs-comment"># ç‚¹èµæŒ‰é’®</span><br>            spot = self.driver.find_element_by_id(<span class="hljs-string">&#x27;arc_toolbar_report&#x27;</span>).find_element_by_class_name(<span class="hljs-string">&#x27;like&#x27;</span>)<br>            <span class="hljs-comment"># é¼ æ ‡å·¦é”®æŒ‰ä¸‹ä¸åŠ¨</span><br>            ActionChains(self.driver).click_and_hold(spot).perform()<br>            time.sleep(<span class="hljs-number">5</span>)<br>            <span class="hljs-comment"># é‡Šæ”¾å·¦é”®</span><br>            ActionChains(self.driver).release(spot).perform()<br>            <span class="hljs-comment"># è§‚çœ‹æ—¶é•¿</span><br>            time.sleep(random.randint(<span class="hljs-number">30</span>, <span class="hljs-number">60</span>))<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    c = CrackSlider()<br>    <span class="hljs-comment"># ç™»å½•</span><br>    c.logo()<br>    <span class="hljs-comment"># éšæœºçœ‹è§†é¢‘</span><br>    c.look_b()<br><br></code></pre></td></tr></table></figure><h2 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h2><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs vim">å®‰è£… <span class="hljs-keyword">python3</span>.<span class="hljs-number">7</span>+<br>å®‰è£… seleniumç­‰ä¸€ç³»åˆ—çš„åº“ï¼Œé…ç½®å¥½è°·æ­Œæµè§ˆå™¨çš„seleniumæ’ä»¶ï¼Œç™¾åº¦å°±è¡Œ<br>ç¬¬ä¸€æ¬¡è¿è¡Œéœ€è¦è‡ªå·±æ‰«ç ç™»å½•<br>win7è®¾ç½®ä»»åŠ¡è®¡åˆ’ï¼Œæ¯å¤©è¿è¡Œæ—¶é—´è‡ªå·±è®¾ç½®ï¼Œç”µè„‘ä¸èƒ½å…³æœºä¼‘çœ ï¼Œå…¶ä»–ç³»ç»Ÿè‡ªè¡Œè®¾ç½®<br>æˆ‘æ˜¯ç”¨å…¬å¸çš„ç”µè„‘ï¼Œæ¯å¤©<span class="hljs-number">12</span>ç‚¹åƒé¥­çš„ç©ºé—²æ—¶é—´è‡ªåŠ¨è¿è¡Œ<br></code></pre></td></tr></table></figure><h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>githubæœ‰å¥½å¤šäº‘å‡½æ•°è¿è¡Œçš„é¡¹ç›®ï¼Œä¸éœ€è¦ç”µè„‘ï¼Œå¯æƒœæˆ‘ä¸ä¼šç”¨ï¼Œå°±åªèƒ½ç”¨è¿™ä¸ªè‡ªè¡Œè½¦äº†ï¼</p>]]></content>
    
    
    
    <tags>
      
      <tag>selenium</tag>
      
      <tag>å“”å“©å“”å“©</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ¥çœ‹å°å§å§è·³èˆ</title>
    <link href="/2021/07/31/xjjtw/"/>
    <url>/2021/07/31/xjjtw/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p align="center">ä¸€èµ·æ¥çœ‹ç„°çµå§¬å°å§å§çš„å…¥æ¢¦èˆ-å¤©è¡Œä¹æ­Œ</p><video src="https://qiuliqi.top/ç„°çµå§¬.mp4" type='video/mp4' controls='controls'  width='100%' height='100%'></video>]]></content>
    
    
    
    <tags>
      
      <tag>å°å§å§</tag>
      
      <tag>èˆè¹ˆ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Python3ä¸‹è½½m3u8</title>
    <link href="/2021/07/29/pym3u8/"/>
    <url>/2021/07/29/pym3u8/</url>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æœ€è¿‘çˆ¬ç½‘ç«™è§†é¢‘çš„æ—¶å€™å‘ç°è§†é¢‘éƒ½æ˜¯ç”¨m3u8çš„æ ¼å¼ï¼Œä¸èƒ½ç›´æ¥ä¸‹è½½</p><p>ç™¾åº¦å€Ÿé‰´äº†ä¸€ä¸‹ä¸‹è½½æ–¹æ³•åï¼Œå°±å†™äº†ä¸€ä¸ªé€‚åˆè‡ªå·±çš„æ–¹æ³•</p><h2 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><p>m3u8 æ–‡ä»¶å®è´¨æ˜¯ä¸€ä¸ªæ’­æ”¾åˆ—è¡¨ï¼ˆplaylistï¼‰ï¼Œäº†è§£è¿™ä¸ªä¹‹åä¸‹è½½å°±æ¯”è¾ƒç®€å•äº†ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/qiuliqi/qiuliqi.github.io@master/img/20210729193458.png"></p><p>åªéœ€è¦æŠŠåˆ—è¡¨ä¸€ä¸ªä¸€ä¸ªåˆå¹¶æˆurlï¼Œå°±å¯ä»¥å…¨éƒ¨ä¸‹è½½ï¼Œå†åˆå¹¶æˆä¸€ä¸ªè§†é¢‘</p><p>å‰ææ˜¯è¿™ä¸ªm3u8æ²¡æœ‰åŠ å¯†ï¼ŒåŠ å¯†ä»€ä¹ˆçš„å¤ªçƒ¦äº†ï¼</p><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">import</span> requests<br><span class="hljs-attribute">import</span> os<br><span class="hljs-attribute">import</span> time<br><br><br><span class="hljs-comment"># è·å–m3u8ä¸‹è½½é“¾æ¥</span><br><span class="hljs-attribute">def</span> get_ts_urls(m<span class="hljs-number">3</span>u<span class="hljs-number">8</span>_index):<br>    <span class="hljs-comment"># å‚¨å­˜m3u8é“¾æ¥</span><br>    <span class="hljs-attribute">m3u8_urls</span> =<span class="hljs-meta"> []</span><br>    <span class="hljs-comment"># getè·å–</span><br>    <span class="hljs-attribute">m3u8s</span> = requests.get(m<span class="hljs-number">3</span>u<span class="hljs-number">8</span>_index).text<br>    <span class="hljs-comment"># æ‹†åˆ†</span><br>    <span class="hljs-attribute">m3u8s</span> = m<span class="hljs-number">3</span>u<span class="hljs-number">8</span>s.strip()<br>    <span class="hljs-attribute">m3u8s</span> = m<span class="hljs-number">3</span>u<span class="hljs-number">8</span>s.split(&#x27;\n&#x27;)<br>    <span class="hljs-comment"># print(m3u8s)</span><br>    <span class="hljs-attribute">for</span> m<span class="hljs-number">3</span>u<span class="hljs-number">8</span> in m<span class="hljs-number">3</span>u<span class="hljs-number">8</span>s:<br>        <span class="hljs-comment"># print(m3u8)</span><br>        <span class="hljs-comment"># åˆ¤æ–­ #</span><br>        <span class="hljs-attribute">if</span> m<span class="hljs-number">3</span>u<span class="hljs-number">8</span>.find(&#x27;#&#x27;) == -<span class="hljs-number">1</span>:<br>            <span class="hljs-comment"># print(m3u8)</span><br>            <span class="hljs-comment"># è·å–å‰ç¼€</span><br>            <span class="hljs-attribute">m3u8_server</span> = url_m<span class="hljs-number">3</span>u<span class="hljs-number">8</span>_index.replace(url_m<span class="hljs-number">3</span>u<span class="hljs-number">8</span>_index.split(&#x27;/&#x27;)[-<span class="hljs-number">1</span>], &#x27;&#x27;)<br>            <span class="hljs-comment"># åˆå¹¶</span><br>            <span class="hljs-attribute">m3u8_url</span> = m<span class="hljs-number">3</span>u<span class="hljs-number">8</span>_server + m<span class="hljs-number">3</span>u<span class="hljs-number">8</span><br>            <span class="hljs-comment"># print(m3u8_url)</span><br>            <span class="hljs-comment"># æ·»åŠ åˆ° list</span><br>            <span class="hljs-attribute">m3u8_urls</span>.append(m<span class="hljs-number">3</span>u<span class="hljs-number">8</span>_url)<br>    <span class="hljs-attribute">print</span>(m<span class="hljs-number">3</span>u<span class="hljs-number">8</span>_urls)<br>    <span class="hljs-attribute">return</span> m<span class="hljs-number">3</span>u<span class="hljs-number">8</span>_urls<br><br><br><span class="hljs-comment"># ä¸‹è½½è§†é¢‘</span><br><span class="hljs-attribute">def</span> down_m<span class="hljs-number">3</span>u<span class="hljs-number">8</span>(urls):<br>    <span class="hljs-attribute">ts_names</span> =<span class="hljs-meta"> []</span><br>    <span class="hljs-attribute">for</span> url in urls:<br>        <span class="hljs-comment"># print(url)</span><br>        <span class="hljs-attribute">try</span>:<br>            <span class="hljs-attribute">res</span> = requests.get(url).content<br>            <span class="hljs-attribute">try</span>:<br>                <span class="hljs-attribute">os</span>.mkdir(&#x27;ä¸´æ—¶ä¸‹è½½æ–‡ä»¶å¤¹&#x27;)<br>            <span class="hljs-attribute">except</span>:<br>                <span class="hljs-attribute">pass</span><br>            <span class="hljs-attribute">ts_name</span> = &#x27;ä¸´æ—¶ä¸‹è½½æ–‡ä»¶å¤¹/&#x27; + url.split(&#x27;/&#x27;)[-<span class="hljs-number">1</span>]<br>            <span class="hljs-attribute">ts_names</span>.append(ts_name)<br>            <span class="hljs-attribute">with</span> open(ts_name, &#x27;wb&#x27;) as f:<br>                <span class="hljs-attribute">f</span>.write(res)<br>            <span class="hljs-attribute">print</span>(&#x27;å¼€å§‹ä¸‹è½½&#123;&#125;&#x27;.format(ts_name))<br>        <span class="hljs-attribute">except</span>:<br>            <span class="hljs-attribute">pass</span><br>    <span class="hljs-comment"># åˆå¹¶è§†é¢‘</span><br>    <span class="hljs-attribute">t</span> = time.strftime(<span class="hljs-string">&quot;%Y%m%d%H%M%S&quot;</span>, time.localtime())<br>    <span class="hljs-attribute">file_path</span> = str(t) + &#x27;.ts&#x27;<br>    <span class="hljs-attribute">with</span> open(file_path, &#x27;wb&#x27;) as fl:<br>        <span class="hljs-attribute">for</span> i in ts_names:<br>            <span class="hljs-attribute">fl</span>.write(open(i, &#x27;rb&#x27;).read())<br>            <span class="hljs-comment"># åˆ é™¤åŸè§†é¢‘</span><br>            <span class="hljs-attribute">os</span>.remove(i)<br>        <span class="hljs-comment"># åˆ é™¤æ–‡ä»¶å¤¹</span><br>        <span class="hljs-attribute">try</span>:<br>            <span class="hljs-attribute">os</span>.rmdir(&#x27;ä¸´æ—¶ä¸‹è½½æ–‡ä»¶å¤¹&#x27;)<br>        <span class="hljs-attribute">except</span>:<br>            <span class="hljs-attribute">pass</span><br><br><br><span class="hljs-attribute">if</span> __name__ == &#x27;__main__&#x27;:<br>    <span class="hljs-attribute">url_m3u8_index</span> = &#x27;https://v.jingruila.com/public/videos/<span class="hljs-number">60</span>ef<span class="hljs-number">8</span>b<span class="hljs-number">9</span>e<span class="hljs-number">05097</span>b<span class="hljs-number">2</span>cfd<span class="hljs-number">6</span>e<span class="hljs-number">9071</span>/index.m<span class="hljs-number">3</span>u<span class="hljs-number">8</span>&#x27;<br>    <span class="hljs-attribute">m3u8_urls</span> = get_ts_urls(url_m<span class="hljs-number">3</span>u<span class="hljs-number">8</span>_index)<br>    <span class="hljs-comment"># print(m3u8_urls)</span><br>    <span class="hljs-attribute">down_m3u8</span>(m<span class="hljs-number">3</span>u<span class="hljs-number">8</span>_urls)<br>    <span class="hljs-attribute">print</span>(&#x27;ä¸‹è½½å®Œæˆ&#x27;)<br></code></pre></td></tr></table></figure><h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>è¿™ä¸ªæ–¹æ³•åªé€‚åˆéƒ¨åˆ†m3u8ä¸‹è½½ï¼Œå› ä¸ºå®ƒæ¯”è¾ƒç®€é™‹ã€‚</p><p>æœ¬æ–‡æœ‰ä¸ªç¦åˆ©å“¦ï¼Œè®¤çœŸå­¦ä¹ çš„åŒå­¦å°±èƒ½å‘ç°ã€‚ã€‚ã€‚</p>]]></content>
    
    
    
    <tags>
      
      <tag>python3</tag>
      
      <tag>m3u8</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¯è§å³å¯çˆ¬ï¼Œselenium çˆ¬å–jsæ‰‹æœºç½‘ç«™</title>
    <link href="/2021/07/01/selpa/"/>
    <url>/2021/07/01/selpa/</url>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æœ€è¿‘å‘ç°ä¸Šæ¬¡çˆ¬çš„å¾—é—´å°è¯´ç½‘ç«™çªç„¶æ›´æ–°äº†ï¼ŒPCç«¯ç½‘é¡µåªèƒ½çœ‹å‰å‡ ç« ï¼Œè€Œä¸”ç½‘ç«™è¿˜ç”¨jsåŠ è½½äº†ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/qiuliqi/qiuliqi.github.io@master/img/20210702100315.png"></p><p>æ‰‹æœºè®¿é—®å‘ç°è¿˜å¯ä»¥å…è´¹è§‚çœ‹ï¼Œç½‘å€å˜æˆm.idejian.comï¼Œä½†æ˜¯PCç«¯è®¿é—®ä¼šè‡ªåŠ¨è·³è½¬</p><h2 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><p>jsåŠ è½½çš„ç½‘ç«™ä¸€èˆ¬requestæ˜¯çˆ¬å–ä¸åˆ°çš„ï¼Œå°±è¦ä½¿ç”¨Seleniumçˆ¬å–ï¼ŒSelenium æ˜¯ä¸€ä¸ªè‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·ï¼Œåˆ©ç”¨å®ƒå¯ä»¥é©±åŠ¨æµè§ˆå™¨æ‰§è¡Œç‰¹å®šçš„åŠ¨ä½œï¼Œå¦‚ç‚¹å‡»ã€ä¸‹æ‹‰ç­‰æ“ä½œï¼ŒåŒæ—¶è¿˜å¯ä»¥è·å–æµè§ˆå™¨å½“å‰å‘ˆç°çš„é¡µé¢æºä»£ç ï¼Œåšåˆ°å¯è§å³å¯çˆ¬ã€‚å¯¹äºä¸€äº›ä½¿ç”¨ JavaScript åŠ¨æ€æ¸²æŸ“çš„é¡µé¢æ¥è¯´ï¼Œæ­¤ç§æŠ“å–æ–¹å¼éå¸¸æœ‰æ•ˆ</p><p>åŒæ—¶è°·æ­Œæµè§ˆå™¨F12å¼€å‘è€…æ˜¯å¯ä»¥æ¨¡æ‹Ÿæ‰‹æœºè®¾å¤‡è®¿é—®çš„ï¼Œè¿™æ ·Seleniumåº”è¯¥ä¹Ÿå¯ä»¥ï¼Œå°±å»æ‰¾äº†ä¸€ä¸‹ä»£ç </p><p><img src="https://cdn.jsdelivr.net/gh/qiuliqi/qiuliqi.github.io@master/img/20210702100010.png"></p><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> selenium <span class="hljs-keyword">import</span> webdriver<br><span class="hljs-keyword">from</span> selenium.webdriver.common.by <span class="hljs-keyword">import</span> By<br><span class="hljs-keyword">from</span> selenium.webdriver.support <span class="hljs-keyword">import</span> expected_conditions <span class="hljs-keyword">as</span> EC<br><span class="hljs-keyword">from</span> selenium.webdriver.support.wait <span class="hljs-keyword">import</span> WebDriverWait<br><br><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CrackSlider</span>():</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-built_in">super</span>(CrackSlider, self).__init__()<br>        <span class="hljs-comment"># å°è¯´ID</span><br>        self.book_id = <span class="hljs-string">&#x27;12525742&#x27;</span><br>        <span class="hljs-comment"># ç« èŠ‚ID</span><br>        self.zj_id = <span class="hljs-number">1</span><br>        <span class="hljs-comment"># åˆå§‹url</span><br>        self.url = <span class="hljs-string">&#x27;https://m.idejian.com/book/&#x27;</span> + self.book_id +<span class="hljs-string">&#x27;/&#x27;</span> + <span class="hljs-built_in">str</span>(self.zj_id) + <span class="hljs-string">&#x27;.html&#x27;</span><br>        <span class="hljs-comment"># å°è¯´åå­—</span><br>        self.book_names = <span class="hljs-string">&#x27;&#x27;</span><br>        <span class="hljs-comment"># æ­¤æ­¥éª¤å¾ˆé‡è¦ï¼Œè®¾ç½®ä¸ºå¼€å‘è€…æ¨¡å¼ï¼Œé˜²æ­¢è¢«å„å¤§ç½‘ç«™è¯†åˆ«å‡ºæ¥</span><br>        self.options = webdriver.ChromeOptions()<br>        self.options.add_experimental_option(<span class="hljs-string">&#x27;excludeSwitches&#x27;</span>, [<span class="hljs-string">&#x27;enable-automation&#x27;</span>])<br>        self.options.add_experimental_option(<span class="hljs-string">&#x27;useAutomationExtension&#x27;</span>, <span class="hljs-literal">False</span>)<br>        self.options.add_argument(<span class="hljs-string">&#x27;--headless&#x27;</span>) <span class="hljs-comment"># è®¾ç½®æ— å¤´æ¨¡å¼</span><br>        <span class="hljs-comment"># æ¨¡æ‹Ÿæ‰‹æœº</span><br>        self.mobileEmulation = &#123;<span class="hljs-string">&#x27;deviceName&#x27;</span>: <span class="hljs-string">&#x27;iPhone X&#x27;</span>&#125;<br>        self.options.add_experimental_option(<span class="hljs-string">&#x27;mobileEmulation&#x27;</span>, self.mobileEmulation)<br><br>        self.driver = webdriver.Chrome(options=self.options)<br>        self.driver.execute_cdp_cmd(<span class="hljs-string">&#x27;Page.addScriptToEvaluateOnNewDocument&#x27;</span>, &#123;<br>            <span class="hljs-string">&#x27;source&#x27;</span>: <span class="hljs-string">&#x27;Object.defineProperty(navigator, &quot;webdriver&quot;, &#123;get: () =&gt; undefined&#125;)&#x27;</span><br>        &#125;)<br>        self.driver.set_window_size(<span class="hljs-number">1366</span>, <span class="hljs-number">768</span>)<br>        <span class="hljs-comment"># self.driver.maximize_window()</span><br>        <span class="hljs-comment"># ç­‰å¾…åŠ è½½å…ƒç´ ï¼Œæœ€å¤š10s</span><br>        self.wait = WebDriverWait(self.driver, <span class="hljs-number">10</span>)<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">open</span>(<span class="hljs-params">self</span>):</span><br>        start_url = <span class="hljs-string">&#x27;https://m.idejian.com/book/&#x27;</span> + self.book_id +<span class="hljs-string">&#x27;/1.html&#x27;</span><br>        self.driver.get(start_url)<br>        <span class="hljs-comment"># ç­‰å¾…ç½‘é¡µåŠ è½½</span><br>        self.wait.until(<br>            EC.presence_of_all_elements_located(<br>                (By.CLASS_NAME, <span class="hljs-string">&#x27;text-title-1&#x27;</span>)<br>            )<br>        )<br>        self.driver.find_element_by_class_name(<span class="hljs-string">&#x27;tips_menu_it&#x27;</span>).click()<br><br>    <span class="hljs-comment"># è·å–å°è¯´åå­—</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">book_name</span>(<span class="hljs-params">self</span>):</span><br>        book_names = self.driver.find_element_by_class_name(<span class="hljs-string">&#x27;biaoti&#x27;</span>).text<br>        book_names = book_names.split(<span class="hljs-string">&#x27;\n&#x27;</span>)<br>        <span class="hljs-built_in">print</span>(book_names[<span class="hljs-number">0</span>])<br>        self.book_names = book_names[<span class="hljs-number">0</span>]<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_book</span>(<span class="hljs-params">self, zj_url, zj_id</span>):</span><br>        txt_s = <span class="hljs-string">&#x27;&#x27;</span><br>        self.driver.get(zj_url)<br>        <span class="hljs-comment"># ç­‰å¾…ç½‘é¡µåŠ è½½</span><br>        <span class="hljs-keyword">try</span>:<br>            self.wait.until(<br>                EC.presence_of_all_elements_located(<br>                    (By.CLASS_NAME, <span class="hljs-string">&#x27;text-title-1&#x27;</span>)<br>                )<br>            )<br>        <span class="hljs-keyword">except</span>:<br>            <span class="hljs-comment"># è¶…è¿‡æœ€åä¸€ç« ä¸ºç©ºç™½ï¼Œè‚¯å®šæŠ¥é”™...</span><br>            self.close()<br>        <span class="hljs-comment"># å¼€å§‹æå–txt</span><br>        <span class="hljs-comment"># ç« èŠ‚åå­—</span><br>        zj_name = self.driver.find_element_by_class_name(<span class="hljs-string">&#x27;text-title-1&#x27;</span>).text<br>        <span class="hljs-built_in">print</span>(zj_name)<br>        txt_s = txt_s + zj_name + <span class="hljs-string">&#x27;\n&#x27;</span><br>        <span class="hljs-comment"># txt</span><br>        <span class="hljs-keyword">if</span> zj_id == <span class="hljs-number">1</span>:<br>            ps = self.driver.find_elements_by_class_name(<span class="hljs-string">&#x27;h5_mainbody&#x27;</span>)[<span class="hljs-number">1</span>].find_elements_by_tag_name(<span class="hljs-string">&#x27;p&#x27;</span>)<br>        <span class="hljs-keyword">else</span>:<br>            ps = self.driver.find_element_by_class_name(<span class="hljs-string">&#x27;h5_mainbody&#x27;</span>).find_elements_by_tag_name(<span class="hljs-string">&#x27;p&#x27;</span>)<br>        <span class="hljs-keyword">if</span> ps:<br>            <span class="hljs-keyword">for</span> p <span class="hljs-keyword">in</span> ps:<br>                txt_s = txt_s + p.text + <span class="hljs-string">&#x27;\n&#x27;</span><br>            <span class="hljs-built_in">print</span>(txt_s)<br>            <span class="hljs-comment"># ä¿å­˜</span><br>            self.writer(txt_s)<br><br>            <span class="hljs-comment"># ä¸‹ä¸€é¡µ</span><br>            zj_id = zj_id + <span class="hljs-number">1</span><br>            next_url = <span class="hljs-string">&#x27;https://m.idejian.com/book/&#x27;</span> + self.book_id +<span class="hljs-string">&#x27;/&#x27;</span> + <span class="hljs-built_in">str</span>(zj_id) + <span class="hljs-string">&#x27;.html&#x27;</span><br>            <span class="hljs-comment"># print(next_url)</span><br>            self.get_book(next_url, zj_id)<br><br>    <span class="hljs-comment"># ä¿å­˜</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">writer</span>(<span class="hljs-params">self, txt</span>):</span><br>        path = self.book_names + <span class="hljs-string">&#x27;.txt&#x27;</span><br>        <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(path, <span class="hljs-string">&#x27;a&#x27;</span>, encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>) <span class="hljs-keyword">as</span> f:<br>            f.write(txt)<br>            f.write(<span class="hljs-string">&#x27;\n\n&#x27;</span>)<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">close</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ä¸‹è½½å®Œæˆ&quot;</span>)<br>        self.driver.close()<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    c = CrackSlider()<br>    c.<span class="hljs-built_in">open</span>()<br>    c.book_name()<br>    c.get_book(c.url, c.zj_id)<br><br></code></pre></td></tr></table></figure><h2 id="å˜¿å˜¿"><a href="#å˜¿å˜¿" class="headerlink" title="å˜¿å˜¿"></a>å˜¿å˜¿</h2><p>è¯„è®ºç³»ç»Ÿä¸å¼€ï¼Œä»£ç å†™çš„çœŸçœ‹ä¸ä¸‹å»å¯ä»¥è”ç³»æ–¹å¼æ¥æ‰¾æˆ‘å–·â€¦</p>]]></content>
    
    
    
    <tags>
      
      <tag>python3</tag>
      
      <tag>selenium</tag>
      
      <tag>å°è¯´ä¸‹è½½</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç”¨Pythonè¯•ç©mysql</title>
    <link href="/2021/06/19/pysql/"/>
    <url>/2021/06/19/pysql/</url>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æœ€è¿‘æ‰¾åˆ°ä¸€ä¸ªå¥½ç©çš„ä¸œè¥¿éœ€è¦ç”¨åˆ°mysqlæ•°æ®åº“ï¼Œå°±ç”¨pythonè¯•è¿™å­¦äº†ä¸€ä¸‹mysqlæœ€åŸºæœ¬çš„ä¸œè¥¿</p><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><code class="hljs vim"># -*- codin<span class="hljs-variable">g:</span> utf-<span class="hljs-number">8</span> -*-<br>import pymysql<br><br>dd = [&#123;<span class="hljs-string">&#x27;è®¢å•å·&#x27;</span>: <span class="hljs-string">&#x27;1461071172&#x27;</span>, <span class="hljs-string">&#x27;ä¸‹å•æ—¶é—´&#x27;</span>: <span class="hljs-string">&#x27;2021-05-18 13:18:38&#x27;</span>, <span class="hljs-string">&#x27;è´­å¡ç±»å‹&#x27;</span>: <span class="hljs-string">&#x27;å¯„å”®ç‚¹æ•°&#x27;</span>, <span class="hljs-string">&#x27;è´­ä¹°é‡‘é¢&#x27;</span>: <span class="hljs-string">&#x27;50.00å…ƒ&#x27;</span>, <span class="hljs-string">&#x27;çŠ¶æ€&#x27;</span>: <span class="hljs-string">&#x27;æœªæ”¯ä»˜&#x27;</span>, <span class="hljs-string">&#x27;å……å€¼å¸å·&#x27;</span>: <span class="hljs-string">&#x27;djdjwq147123@163.com&#x27;</span>, <span class="hljs-string">&#x27;å……å€¼ç±»å‹&#x27;</span>: <span class="hljs-string">&#x27;å¯„å”®ç‚¹æ•°&#x27;</span>, <span class="hljs-string">&#x27;å……å€¼æ•°é‡&#x27;</span>: <span class="hljs-string">&#x27;500&#x27;</span>, <span class="hljs-string">&#x27;æ”¯ä»˜æ–¹å¼&#x27;</span>: <span class="hljs-string">&#x27;ç½‘æ˜“æ”¯ä»˜&#x27;</span>, <span class="hljs-string">&#x27;æ”¯ä»˜é‡‘é¢&#x27;</span>: <span class="hljs-string">&#x27;50.00 å…ƒ&#x27;</span>, <span class="hljs-string">&#x27;å‚ä¸æ´»åŠ¨&#x27;</span>: <span class="hljs-string">&#x27;æ‚¨æœªå‚åŠ æ´»åŠ¨&#x27;</span>&#125;,&#123;<span class="hljs-string">&#x27;è®¢å•å·&#x27;</span>: <span class="hljs-string">&#x27;1461071173&#x27;</span>, <span class="hljs-string">&#x27;ä¸‹å•æ—¶é—´&#x27;</span>: <span class="hljs-string">&#x27;2021-05-18 13:18:38&#x27;</span>, <span class="hljs-string">&#x27;è´­å¡ç±»å‹&#x27;</span>: <span class="hljs-string">&#x27;å¯„å”®ç‚¹æ•°&#x27;</span>, <span class="hljs-string">&#x27;è´­ä¹°é‡‘é¢&#x27;</span>: <span class="hljs-string">&#x27;50.00å…ƒ&#x27;</span>, <span class="hljs-string">&#x27;çŠ¶æ€&#x27;</span>: <span class="hljs-string">&#x27;æœªæ”¯ä»˜&#x27;</span>, <span class="hljs-string">&#x27;å……å€¼å¸å·&#x27;</span>: <span class="hljs-string">&#x27;djdjwq147123@163.com&#x27;</span>, <span class="hljs-string">&#x27;å……å€¼ç±»å‹&#x27;</span>: <span class="hljs-string">&#x27;å¯„å”®ç‚¹æ•°&#x27;</span>, <span class="hljs-string">&#x27;å……å€¼æ•°é‡&#x27;</span>: <span class="hljs-string">&#x27;500&#x27;</span>, <span class="hljs-string">&#x27;æ”¯ä»˜æ–¹å¼&#x27;</span>: <span class="hljs-string">&#x27;ç½‘æ˜“æ”¯ä»˜&#x27;</span>, <span class="hljs-string">&#x27;æ”¯ä»˜é‡‘é¢&#x27;</span>: <span class="hljs-string">&#x27;50.00 å…ƒ&#x27;</span>, <span class="hljs-string">&#x27;å‚ä¸æ´»åŠ¨&#x27;</span>: <span class="hljs-string">&#x27;æ‚¨æœªå‚åŠ æ´»åŠ¨&#x27;</span>&#125;]<br># è¿æ¥æ•°æ®åº“<br>def mysql_lj():<br>    <span class="hljs-keyword">try</span>:<br>        # æ‰“å¼€æ•°æ®åº“è¿æ¥<br>        conn = pymysql.connect(<span class="hljs-string">&#x27;localhost&#x27;</span>, user = <span class="hljs-string">&#x27;root&#x27;</span>, passwd = <span class="hljs-string">&#x27;password&#x27;</span>, db = <span class="hljs-string">&#x27;pythonDB&#x27;</span>)<br>        # è·å–æ¸¸æ ‡<br>        <span class="hljs-built_in">cursor</span> = conn.<span class="hljs-built_in">cursor</span>()<br>        <span class="hljs-keyword">print</span>(<span class="hljs-string">&quot;æ•°æ®åº“è¿æ¥æˆåŠŸ&quot;</span>)<br>    excep<span class="hljs-variable">t:</span><br>        <span class="hljs-keyword">print</span>(<span class="hljs-string">&quot;ç¬¬ä¸€æ¬¡è¿æ¥æ•°æ®åº“å¤±è´¥&quot;</span>)<br>        # åˆ›å»ºæ•°æ®åº“<br>        # æ‰“å¼€æ•°æ®åº“è¿æ¥<br>        conn = pymysql.connect(<span class="hljs-string">&#x27;localhost&#x27;</span>, user = <span class="hljs-string">&#x27;root&#x27;</span>, passwd = <span class="hljs-string">&#x27;password&#x27;</span>)<br>        # è·å–æ¸¸æ ‡<br>        <span class="hljs-built_in">cursor</span> = conn.<span class="hljs-built_in">cursor</span>()<br>        # åˆ›å»ºpythonBDæ•°æ®åº“<br>        <span class="hljs-built_in">cursor</span>.<span class="hljs-keyword">execute</span>(<span class="hljs-string">&#x27;CREATE DATABASE IF NOT EXISTS pythonDB DEFAULT CHARSET utf8 COLLATE utf8_general_ci;&#x27;</span>)<br>        <span class="hljs-built_in">cursor</span>.<span class="hljs-keyword">close</span>() # å…ˆå…³é—­æ¸¸æ ‡<br>        conn.<span class="hljs-keyword">close</span>() # å†å…³é—­æ•°æ®åº“è¿æ¥<br>        <span class="hljs-keyword">print</span>(<span class="hljs-string">&#x27;åˆ›å»ºpythonBDæ•°æ®åº“æˆåŠŸ&#x27;</span>)<br>        conn = pymysql.connect(<span class="hljs-string">&#x27;localhost&#x27;</span>, user = <span class="hljs-string">&#x27;root&#x27;</span>, passwd = <span class="hljs-string">&#x27;password&#x27;</span>, db = <span class="hljs-string">&#x27;pythonDB&#x27;</span>)<br>        # è·å–æ¸¸æ ‡<br>        <span class="hljs-built_in">cursor</span> = conn.<span class="hljs-built_in">cursor</span>()<br>        # åˆ›å»ºè¡¨<br>        <span class="hljs-built_in">cursor</span>.<span class="hljs-keyword">execute</span>(<span class="hljs-string">&#x27;drop table if exists user&#x27;</span>)<br>        sql = <span class="hljs-string">&quot;&quot;</span><span class="hljs-comment">&quot;CREATE TABLE IF NOT EXISTS `user` (</span><br>        `è®¢å•å·` <span class="hljs-keyword">int</span>(<span class="hljs-number">11</span>) NOT NULL,<br>        `ä¸‹å•æ—¶é—´` varchar(<span class="hljs-number">255</span>) NOT NULL,<br>        `è´­å¡ç±»å‹` varchar(<span class="hljs-number">255</span>) NOT NULL,<br>        `è´­ä¹°é‡‘é¢` varchar(<span class="hljs-number">255</span>) NOT NULL,<br>        `çŠ¶æ€` varchar(<span class="hljs-number">255</span>) NOT NULL,<br>        `å……å€¼å¸å·` varchar(<span class="hljs-number">255</span>) NOT NULL,<br>        `å……å€¼ç±»å‹` varchar(<span class="hljs-number">255</span>) NOT NULL,<br>        `å……å€¼æ•°é‡` <span class="hljs-keyword">int</span>(<span class="hljs-number">11</span>) NOT NULL,<br>        `æ”¯ä»˜æ–¹å¼` varchar(<span class="hljs-number">255</span>) NOT NULL,<br>        `æ”¯ä»˜é‡‘é¢` varchar(<span class="hljs-number">255</span>) NOT NULL,<br>        `å‚ä¸æ´»åŠ¨` varchar(<span class="hljs-number">255</span>) NOT NULL,<br>        PRIMARY KEY (`è®¢å•å·`)<br>        ) ENGINE=InnoDB  DEFAULT CHARSET=utf8<span class="hljs-string">&quot;&quot;</span><span class="hljs-comment">&quot;</span><br>        <span class="hljs-built_in">cursor</span>.<span class="hljs-keyword">execute</span>(sql)<br><br><br># æ’å…¥æ•°æ®åº“<br>def insert_mysql():<br>    conn = pymysql.connect(<span class="hljs-string">&#x27;localhost&#x27;</span>, user = <span class="hljs-string">&#x27;root&#x27;</span>, passwd = <span class="hljs-string">&#x27;password&#x27;</span>, db = <span class="hljs-string">&#x27;pythonDB&#x27;</span>)<br>    # è·å–æ¸¸æ ‡<br>    <span class="hljs-built_in">cursor</span> = conn.<span class="hljs-built_in">cursor</span>()<br>    <span class="hljs-keyword">for</span> i in dd:<br>        sql = <span class="hljs-string">&quot;insert into user values(%s,%s,%s,%s,%s,%s,%s,%s,%s,%s,%s)&quot;</span><br>        <span class="hljs-keyword">try</span>:<br>            <span class="hljs-keyword">insert</span> = <span class="hljs-built_in">cursor</span>.<span class="hljs-keyword">execute</span>(sql, (i[<span class="hljs-string">&#x27;è®¢å•å·&#x27;</span>],i[<span class="hljs-string">&#x27;ä¸‹å•æ—¶é—´&#x27;</span>],i[<span class="hljs-string">&#x27;è´­å¡ç±»å‹&#x27;</span>],i[<span class="hljs-string">&#x27;è´­ä¹°é‡‘é¢&#x27;</span>],i[<span class="hljs-string">&#x27;çŠ¶æ€&#x27;</span>],i[<span class="hljs-string">&#x27;å……å€¼å¸å·&#x27;</span>],i[<span class="hljs-string">&#x27;å……å€¼ç±»å‹&#x27;</span>],i[<span class="hljs-string">&#x27;å……å€¼æ•°é‡&#x27;</span>],i[<span class="hljs-string">&#x27;æ”¯ä»˜æ–¹å¼&#x27;</span>],i[<span class="hljs-string">&#x27;æ”¯ä»˜é‡‘é¢&#x27;</span>],i[<span class="hljs-string">&#x27;å‚ä¸æ´»åŠ¨&#x27;</span>]))<br>            <span class="hljs-keyword">print</span>(<span class="hljs-string">&#x27;æ·»åŠ è¯­å¥å—å½±å“çš„è¡Œæ•°ï¼š&#x27;</span>,<span class="hljs-keyword">insert</span>)<br>        excep<span class="hljs-variable">t:</span><br>            <span class="hljs-keyword">print</span>(<span class="hljs-string">&#x27;è®¢å•å·&#123;&#125;é‡å¤ï¼Œä¸æ’å…¥æ•°æ®åº“&#x27;</span>.format(i[<span class="hljs-string">&#x27;è®¢å•å·&#x27;</span>]))<br>    conn.commit() # æ›´æ–°<br>    <span class="hljs-built_in">cursor</span>.<span class="hljs-keyword">close</span>()<br>    conn.<span class="hljs-keyword">close</span>()<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    mysql_lj()<br>    insert_mysql()<br><br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>python3</tag>
      
      <tag>mysql</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>pythonå¤šçº¿ç¨‹ä¸‹è½½å°è¯´</title>
    <link href="/2021/05/14/downtxt/"/>
    <url>/2021/05/14/downtxt/</url>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åšä¸ºä¸€ä¸ªå®…ç”·ï¼Œè‡ªç„¶æ˜¯ä¸€å®šä¼šçœ‹å°è¯´çš„ï¼Œç°åœ¨å¥½çœ‹çš„å°è¯´éƒ½æ˜¯éœ€è¦ä»˜è´¹çš„ï¼Œä½†æ˜¯ç™½å«–çš„ä¸€å®šæ›´é¦™ã€‚</p><p>åˆ†äº«ä¸€ä¸ªæˆ‘ç»å¸¸çœ‹çš„å°è¯´ç½‘ç«™<a href="https://www.idejian.com/">å¾—é—´</a>ï¼ŒåŸºæœ¬æŒé˜…çš„å°è¯´éƒ½æœ‰ã€‚</p><p>è‡ªå·±ä¸€èˆ¬æ˜¯åœ¨APPé‡Œå¬å°è¯´ï¼Œæµè§ˆå™¨é‡Œå°±ä¸è¡Œï¼Œå°±æŠŠä»–çˆ¬ä¸‹æ¥æœ¬åœ°é˜…è¯»äº†</p><h2 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><p>ä¸€å¼€å§‹å°±æ˜¯ç”¨requestæ–¹æ³•ä¸‹è½½ï¼Œå‘ç°ä¸‹è½½é€Ÿåº¦å®åœ¨æ˜¯å¤ªæ…¢äº†ï¼Œå°±åŠ ä¸Šäº†å¤šçº¿ç¨‹</p><p>æ„Ÿè°¢<a href="https://blog.csdn.net/the_sangzi_home/article/details/104567605">æ¡‘æ¢“å—</a>å¤§ä½¬æä¾›çš„å¤šçº¿ç¨‹æ–¹æ³•</p><p><img src="https://cdn.jsdelivr.net/gh/qiuliqi/qiuliqi.github.io@master/img/20210514194218.png"></p><h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> threading<br><span class="hljs-keyword">import</span> time<br><span class="hljs-keyword">from</span> bs4 <span class="hljs-keyword">import</span> BeautifulSoup<br><span class="hljs-keyword">import</span> codecs<br><span class="hljs-keyword">import</span> requests<br><br><span class="hljs-comment"># å¼€å§‹æ—¶é—´</span><br>start_time = time.time()<br><br><br><span class="hljs-comment"># åˆ›å»ºçº¿ç¨‹ç±»</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">myTread</span>(<span class="hljs-params">threading.Thread</span>):</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self, threadID, name, st</span>):</span><br>        threading.Thread.__init__(self)<br>        self.threadID = threadID<br>        self.name = name<br>        self.st = st<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run</span>(<span class="hljs-params">self</span>):</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;stat &quot;</span>, <span class="hljs-built_in">str</span>(self.name))<br>        threadget(self.st)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;end &quot;</span>, <span class="hljs-built_in">str</span>(self.name))<br><br><br>txtcontent = &#123;&#125;  <span class="hljs-comment"># å­˜å‚¨å°è¯´æ‰€æœ‰å†…å®¹</span><br>server_url = <span class="hljs-string">&#x27;https://www.idejian.com&#x27;</span><br>headers = &#123;<br>    <span class="hljs-string">&#x27;Accept&#x27;</span>: <span class="hljs-string">&#x27;text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9&#x27;</span>,<br>    <span class="hljs-string">&#x27;Accept-Language&#x27;</span>: <span class="hljs-string">&#x27;zh-CN,zh;q=0.9,en;q=0.8&#x27;</span>,<br>    <span class="hljs-string">&#x27;user-agent&#x27;</span>: <span class="hljs-string">&#x27;Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.141 Safari/537.36&#x27;</span><br>&#125;<br><br><br><span class="hljs-comment"># get</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">gethtml</span>(<span class="hljs-params">url</span>):</span><br>    html = requests.get(url=url, headers=headers).content.decode(<span class="hljs-string">&#x27;UTF-8&#x27;</span>, <span class="hljs-string">&#x27;ignore&#x27;</span>)<br>    <span class="hljs-keyword">return</span> html<br><br><br>txt_name = []  <span class="hljs-comment"># å­˜æ”¾å°è¯´åå­—</span><br>chaptername = []  <span class="hljs-comment"># å­˜æ”¾å°è¯´ç« èŠ‚åå­—</span><br>chapteraddress = []  <span class="hljs-comment"># å­˜æ”¾å°è¯´ç« èŠ‚åœ°å€</span><br><br><br><span class="hljs-comment"># è·å–å°è¯´åå­—ã€æ‰€æœ‰ç« èŠ‚åå­—å’Œåœ°å€</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getchapter</span>(<span class="hljs-params">html</span>):</span><br>    soup = BeautifulSoup(html, <span class="hljs-string">&#x27;lxml&#x27;</span>)<br>    <span class="hljs-keyword">try</span>:<br>        name = soup.find(<span class="hljs-string">&#x27;div&#x27;</span>, class_=<span class="hljs-string">&quot;detail_bkname&quot;</span>).find(<span class="hljs-string">&#x27;a&#x27;</span>)<br>        <span class="hljs-comment">#print(name.string)</span><br>        txt_name.append(name.string)<br>        alist = soup.find(<span class="hljs-string">&#x27;ul&#x27;</span>, class_=<span class="hljs-string">&quot;catelog_list&quot;</span>).find_all(<span class="hljs-string">&#x27;a&#x27;</span>)<br>        <span class="hljs-comment">#print(alist)</span><br>        <span class="hljs-keyword">for</span> <span class="hljs-built_in">list</span> <span class="hljs-keyword">in</span> alist:<br>            <span class="hljs-comment"># print(list.string)</span><br>            chaptername.append(<span class="hljs-built_in">list</span>.string)<br>            href = <span class="hljs-string">&#x27;https://www.idejian.com&#x27;</span> + <span class="hljs-built_in">list</span>[<span class="hljs-string">&#x27;href&#x27;</span>]<br>            chapteraddress.append(href)<br>    <span class="hljs-keyword">except</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;æœªæ‰¾åˆ°ç« èŠ‚&#x27;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br><br><br><span class="hljs-comment"># è·å–ç« èŠ‚å†…å®¹</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getdetail</span>(<span class="hljs-params">html</span>):</span><br>    soup = BeautifulSoup(html, <span class="hljs-string">&#x27;lxml&#x27;</span>)<br>    <span class="hljs-keyword">try</span>:<br>        content = <span class="hljs-string">&#x27;&#x27;</span><br>        pstring = soup.find_all(<span class="hljs-string">&#x27;div&#x27;</span>, class_=<span class="hljs-string">&quot;h5_mainbody&quot;</span>)<br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(pstring) &gt; <span class="hljs-number">1</span>:<br>            pstrings = pstring[<span class="hljs-number">1</span>].find_all(<span class="hljs-string">&#x27;p&#x27;</span>)<br>        <span class="hljs-keyword">else</span>:<br>            pstrings = pstring[<span class="hljs-number">0</span>].find_all(<span class="hljs-string">&#x27;p&#x27;</span>)<br>        <span class="hljs-comment"># print(pstrings)</span><br>        <span class="hljs-keyword">for</span> p <span class="hljs-keyword">in</span> pstrings:<br>            content += p.string<br>            <span class="hljs-comment"># content += &#x27;\n&#x27;</span><br>        <span class="hljs-comment"># print(content)</span><br>        <span class="hljs-keyword">return</span> content<br>    <span class="hljs-keyword">except</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;å‡ºé”™&quot;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;å‡ºé”™&quot;</span><br><br><br><span class="hljs-comment"># çº¿ç¨‹ç±»</span><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">threadget</span>(<span class="hljs-params">st</span>):</span><br>    <span class="hljs-built_in">max</span> = <span class="hljs-built_in">len</span>(chaptername)<br>    <span class="hljs-keyword">while</span> st &lt; <span class="hljs-built_in">max</span>:<br>        url = <span class="hljs-built_in">str</span>(chapteraddress[st])<br>        html = gethtml(url)<br>        content = getdetail(html)<br>        txtcontent[st] = content<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;ä¸‹è½½å®Œæ¯•&#x27;</span> + chaptername[st])<br>        st += thread_count<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getname</span>(<span class="hljs-params">name</span>):</span><br>    url = <span class="hljs-string">&#x27;https://www.idejian.com/search?keyword=&#x27;</span> + name<br>    html = gethtml(url)<br>    soup = BeautifulSoup(html, <span class="hljs-string">&#x27;lxml&#x27;</span>)<br>    <span class="hljs-keyword">try</span>:<br>        namelist = soup.find(<span class="hljs-string">&#x27;ul&#x27;</span>, class_=<span class="hljs-string">&quot;rank_ullist&quot;</span>).find(<span class="hljs-string">&#x27;div&#x27;</span>, class_=<span class="hljs-string">&quot;rank_bkname&quot;</span>).find(<span class="hljs-string">&#x27;a&#x27;</span>)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;å¼€å§‹ä¸‹è½½å°è¯´ï¼š&#x27;</span>,namelist.string)<br>        <span class="hljs-keyword">return</span> namelist[<span class="hljs-string">&#x27;href&#x27;</span>]<br>    <span class="hljs-keyword">except</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;æœªæ‰¾åˆ°è¯¥å°è¯´&#x27;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br><br><br><br><br><br>txt_id = <span class="hljs-built_in">str</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">&#x27;è¯·è¾“å…¥ä½ æƒ³è¦ä¸‹è½½çš„å°è¯´åå­—\n&#x27;</span>))<br>book_url = getname(txt_id)<br><span class="hljs-keyword">if</span> book_url:<br>    url = server_url + book_url<br>    html = gethtml(url)<br>    getchapter(html)<br><br>    thread_list = []<br>    thread_count = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;è¯·è¾“å…¥éœ€è¦å¼€çš„çº¿ç¨‹æ•°\n&quot;</span>))<br>    <span class="hljs-keyword">for</span> <span class="hljs-built_in">id</span> <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(thread_count):<br>        thread1 = myTread(<span class="hljs-built_in">id</span>, <span class="hljs-built_in">str</span>(<span class="hljs-built_in">id</span>), <span class="hljs-built_in">id</span>)<br>        thread_list.append(thread1)<br><br>    <span class="hljs-keyword">for</span> t <span class="hljs-keyword">in</span> thread_list:<br>        t.setDaemon(<span class="hljs-literal">False</span>)<br>        t.start()<br><br>    <span class="hljs-keyword">for</span> t <span class="hljs-keyword">in</span> thread_list:<br>        t.join()<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;\nå­çº¿ç¨‹è¿è¡Œå®Œæ¯•&#x27;</span>)<br>    <span class="hljs-comment"># ç« èŠ‚å†…å®¹æ’åº</span><br>    txtcontent1 = <span class="hljs-built_in">sorted</span>(txtcontent)<br>    file = codecs.<span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;./å°è¯´/&#x27;</span> + txt_name[<span class="hljs-number">0</span>] + <span class="hljs-string">&#x27;.txt&#x27;</span>, <span class="hljs-string">&#x27;w&#x27;</span>, encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>)  <span class="hljs-comment"># å°è¯´å­˜å‚¨ä½ç½®</span><br>    chaptercount = <span class="hljs-built_in">len</span>(chaptername)<br><br>    <span class="hljs-comment"># å†™å…¥æ–‡ä»¶</span><br>    <span class="hljs-keyword">for</span> ch <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(chaptercount):<br>        title = <span class="hljs-built_in">str</span>(chaptername[ch]) + <span class="hljs-string">&#x27;\n&#x27;</span><br>        content = <span class="hljs-built_in">str</span>(txtcontent[txtcontent1[ch]])<br>        file.write(title+content)<br>    file.close()<br>    end_time = time.time()<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;ä¸‹è½½å®Œæ¯•ï¼Œæ€»è€—æ—¶&quot;</span>, <span class="hljs-built_in">int</span>(end_time-start_time), <span class="hljs-string">&quot;ç§’&quot;</span>)<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>python3</tag>
      
      <tag>å°è¯´</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>PCç‰ˆå¾®ä¿¡åŠ å¯†å›¾ç‰‡è§£å¯†ï¼Œç”¨Pythonå®ç°</title>
    <link href="/2021/05/05/wximg/"/>
    <url>/2021/05/05/wximg/</url>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æƒ³æ‰¾ä»¥å‰èŠå¤©çš„å›¾ç‰‡çš„æ—¶å€™æ‰å‘ç°PCç‰ˆçš„å¾®ä¿¡å›¾ç‰‡å‚¨å­˜çš„æ–‡ä»¶éƒ½datæ ¼å¼ï¼Œä¸èƒ½ç›´æ¥æ‰“å¼€ã€‚åœ¨åº¦å¨˜æœç´¢åˆ°å¾®ä¿¡ä¼šåŠ å¯†å­˜å‚¨ç”¨æˆ·æ¥å—åˆ°çš„æ‰€æœ‰å›¾ç‰‡ä¿¡æ¯ï¼Œè§£å¯†æ–¹æ³•ä¹Ÿå¥½å¤šã€‚</p><p>åˆšå¥½æœ€è¿‘åœ¨å­¦pythonï¼Œçœ‹åˆ°æœ‰ç”¨pythonçš„è§£å¯†æ–¹æ³•ï¼Œæ‹¿æ¥ç»ƒç»ƒæ‰‹å¥½äº†</p><h2 id="è§£å¯†æ–¹æ³•"><a href="#è§£å¯†æ–¹æ³•" class="headerlink" title="è§£å¯†æ–¹æ³•"></a>è§£å¯†æ–¹æ³•</h2><p>åœ¨çŸ¥ä¹ä¸Šçœ‹åˆ°å¤§ä½¬<strong>Pythonå°å®‡å®™</strong>çš„æ–¹æ³•<br><img src="https://cdn.jsdelivr.net/gh/qiuliqi/qiuliqi.github.io@master/img/20210505171033.png"></p><h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><br><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">å›¾ç‰‡å­—èŠ‚å¤´ä¿¡æ¯ï¼Œ</span><br><span class="hljs-string">[0][1]ä¸ºjpgå¤´ä¿¡æ¯ï¼Œ</span><br><span class="hljs-string">[2][3]ä¸ºpngå¤´ä¿¡æ¯ï¼Œ</span><br><span class="hljs-string">[4][5]ä¸ºgifå¤´ä¿¡æ¯</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br>pic_head = [<span class="hljs-number">0xff</span>, <span class="hljs-number">0xd8</span>, <span class="hljs-number">0x89</span>, <span class="hljs-number">0x50</span>, <span class="hljs-number">0x47</span>, <span class="hljs-number">0x49</span>]<br><span class="hljs-comment"># è§£å¯†ç </span><br>decode_code = <span class="hljs-number">0</span><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_code</span>(<span class="hljs-params">file_path</span>):</span><br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    è‡ªåŠ¨åˆ¤æ–­æ–‡ä»¶ç±»å‹ï¼Œå¹¶è·å–datæ–‡ä»¶è§£å¯†ç </span><br><span class="hljs-string">    :param file_path: datæ–‡ä»¶è·¯å¾„</span><br><span class="hljs-string">    :return: å¦‚æœæ–‡ä»¶ä¸ºjpg/png/gifæ ¼å¼ï¼Œåˆ™è¿”å›è§£å¯†ç ï¼Œå¦åˆ™è¿”å›0</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    dat_file = <span class="hljs-built_in">open</span>(file_path, <span class="hljs-string">&quot;rb&quot;</span>)<br>    dat_read = dat_file.read(<span class="hljs-number">2</span>)<br>    head_index = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">while</span> head_index &lt; <span class="hljs-built_in">len</span>(pic_head):<br>        <span class="hljs-comment"># ä½¿ç”¨ç¬¬ä¸€ä¸ªå¤´ä¿¡æ¯å­—èŠ‚æ¥è®¡ç®—åŠ å¯†ç </span><br>        <span class="hljs-comment"># ç¬¬äºŒä¸ªå­—èŠ‚æ¥éªŒè¯è§£å¯†ç æ˜¯å¦æ­£ç¡®</span><br>        code = dat_read[<span class="hljs-number">0</span>] ^ pic_head[head_index]<br>        idf_code = dat_read[<span class="hljs-number">1</span>] ^ code<br>        head_index = head_index + <span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> idf_code == pic_head[head_index]:<br>            dat_file.close()<br>            <span class="hljs-keyword">return</span> code<br>        head_index = head_index + <span class="hljs-number">1</span><br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;not jpg, png , gif&quot;</span>)<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">decode_dat</span>(<span class="hljs-params">file_path</span>):</span><br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    è§£å¯†æ–‡ä»¶ï¼Œå¹¶ç”Ÿæˆå›¾ç‰‡</span><br><span class="hljs-string">    :param file_path: datæ–‡ä»¶è·¯å¾„</span><br><span class="hljs-string">    : return: æ— </span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    decode_code = get_code(file_path)<br>    dat_file = <span class="hljs-built_in">open</span>(file_path, <span class="hljs-string">&quot;rb&quot;</span>)<br>    <span class="hljs-comment"># å»é™¤ã€‚datåç¼€</span><br>    pic_name = os.path.splitext(file_path)[<span class="hljs-number">0</span>] + <span class="hljs-string">&quot;.jpg&quot;</span><br>    <span class="hljs-comment"># æ£€æµ‹æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œé¿å…é‡å¤è¿è¡Œå‡ºç°å¤šä¸ªæ–‡ä»¶</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.isfile(pic_name):<br>        pic_write = <span class="hljs-built_in">open</span>(pic_name, <span class="hljs-string">&quot;wb&quot;</span>)<br>        <span class="hljs-keyword">for</span> dat_data <span class="hljs-keyword">in</span> dat_file:<br>            <span class="hljs-keyword">for</span> dat_byte <span class="hljs-keyword">in</span> dat_data:<br>                pic_data = dat_byte ^ decode_code<br>                pic_write.write(<span class="hljs-built_in">bytes</span>([pic_data]))<br>        <span class="hljs-built_in">print</span>(pic_name + <span class="hljs-string">&#x27;å®Œæˆ&#x27;</span>)<br>        dat_file.close()<br>        pic_write.close()<br><br><br><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">find_datfile</span>(<span class="hljs-params">dir_path</span>):</span><br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    è·å–datæ–‡ä»¶ç›®å½•ä¸‹æ‰€æœ‰çš„æ–‡ä»¶</span><br><span class="hljs-string">    :param dir_path: datæ–‡ä»¶ç›®å½•</span><br><span class="hljs-string">    :return: æ— </span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    flies_list = os.listdir(dir_path)<br>    <span class="hljs-keyword">for</span> file_name <span class="hljs-keyword">in</span> flies_list:<br>        file_path = os.path.join(dir_path, file_name)<br>        <span class="hljs-comment"># åˆ¤æ–­æ˜¯å¦æ–‡ä»¶å¤¹</span><br>        <span class="hljs-keyword">if</span> os.path.isdir(file_path):<br>            find_datfile(file_path)<br>        <span class="hljs-keyword">if</span> os.path.isfile(file_path):<br>            decode_dat(file_path)<br><br><br>path = <span class="hljs-string">&#x27;C:\\Users\\qiu\\Desktop\\222&#x27;</span><br>find_datfile(path)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;æ–‡ä»¶è§£å¯†å®Œæˆ&quot;</span>)<br><br></code></pre></td></tr></table></figure><p>æ„Ÿè°¢å¤§ä½¬ <a href="https://zhuanlan.zhihu.com/p/130314175">Pythonå°å®‡å®™</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>å¾®ä¿¡å›¾ç‰‡</tag>
      
      <tag>python3</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>é‡æ–°æ­å»ºhexo</title>
    <link href="/2021/04/28/newhexomk/"/>
    <url>/2021/04/28/newhexomk/</url>
    
    <content type="html"><![CDATA[<p>ä¹‹å‰æ­å»ºçš„hexoæœ¬åœ°æ–‡ä»¶å› ä¸ºé‡è£…ç³»ç»Ÿææ²¡äº†ï¼Œå°±ä¸€ç›´æ‡’çš„å»æ‰¾å›äº†ï¼Œæƒ³ç€æ°¸ä¸æ›´æ–°çš„ï¼</p><p>ç»“æœä»Šå¤©æœ‰æ—¶é—´å°±æ…¢æ…¢æ‰¾å›äº†ï¼Œæˆ‘æ²¡ç”¨å•¥æŠ€å·§ï¼Œé‡æ–°ä¸‹è½½ä¸»é¢˜è®¾ç½®ï¼Œé‡æ–°æ›´æ–°æ—§æ–‡ç« â€¦</p><p>2022.2.16æ›´æ–°</p><p>å› ä¸ºç³»ç»Ÿé‡è£…ï¼Œåˆè¦é‡æ–°æ­å»ºä¸€æ¬¡hexoï¼Œè¿˜å¥½æœ¬åœ°æ–‡ä»¶ä¿å­˜å¥½äº†</p><p>ä¸‹è½½gitï¼Œè®¾ç½®ç”¨æˆ·åå’Œé‚®ç®±ï¼Œè¿æ¥ssh</p><p>ä¸‹è½½node.jsï¼Œä¸‹è½½hexo</p><p>è¿˜å¥½æœ‰å¤§ä½¬ <a href="https://www.cnblogs.com/visugar/p/6821777.html">çˆ±åƒé¢åŒ…çš„å…°å…°</a> çš„hexoæ•™ç¨‹ï¼Œè¿™æ¬¡æ­å»ºè¿˜ç®—è½»æ¾</p><p>éå¸¸æ„Ÿè°¢ï¼</p>]]></content>
    
    
    
    <tags>
      
      <tag>æ—¥è®°</tag>
      
      <tag>hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç»ˆäºå­¦ä¼šæ”¹å¤§ä½¬apié‡Œé¢çš„æ¨¡å‹äº†</title>
    <link href="/2021/04/28/xuehuigaiapi/"/>
    <url>/2021/04/28/xuehuigaiapi/</url>
    
    <content type="html"><![CDATA[<p style="text-indent: 2em;">ä¸€å¼€å§‹çœ‹åˆ°å¤§ä½¬é‚£ä¸€é¡µæ»¡æ»¡çš„apiè¯´æ˜å°±é€€ç¼©äº†ï¼Œä»¥ä¸ºæ”¹å¤§ä½¬apié‡Œé¢çš„æ¨¡å‹å¾ˆéº»çƒ¦ï¼Œæ²¡æ€ä¹ˆçœ‹å°±ç›´æ¥æ‹¿æ¥ç”¨äº†ã€‚è¿™å‡ å¤©å› ä¸ºå­¦äº†ç‚¹åœ¨æ¸¸æˆé‡Œæå–live2dçš„æ–¹æ³•ï¼Œæ²‰è¿·äºçº¸ç‰‡äººæ— æ³•è‡ªæ‹”äº†ï¼Œæ‰’äº†ä¸€å¤§å †æ¨¡å‹æ–‡ä»¶ï¼Œå°±æƒ³æ”¾åˆ°æˆ‘çš„ç½‘ç«™ä¸Šæ…¢æ…¢ç©</p><p style="text-indent: 2em;">äºæ˜¯é‡æ–°å›å»çœ‹äº†ä¸€ä¸‹å¤§ä½¬ä»‹ç»çš„ä½¿ç”¨æ–¹æ³•ï¼Œå‘ç°åŸæ¥ååˆ†çš„ç®€å•ï¼Œå°±æ˜¯åœ¨modelé‡Œé¢æ·»åŠ æ¨¡å‹æ–‡ä»¶ï¼Œç„¶ååœ¨listæ–‡ä»¶é‡Œæ·»åŠ è·¯å¾„å°±å¯ä»¥ï¼Œå¤§ä½¬çœŸçš„æ˜¯å¤ªæ£’äº†</p><p><img src="https://qiuliqi.top/wp-content/uploads/2020/09/20200904144046.png" alt="ç›®å½•"></p><p>éœ€è¦æ³¨æ„çš„æ˜¯æ¨¡å‹æ–‡ä»¶é‡Œé¢çš„æ–‡ä»¶åéœ€è¦ä¿®æ”¹ä¸€ä¸‹ä¸‹ï¼Œèµ·é£å’¯</p><p><a href="https://api.qiuliqi.top/live2d/mxapisy.html">å°å¯çˆ±é¢„è§ˆå’Œä½¿ç”¨æ–¹æ³•</a></p><p>è°¢è°¢å„ä½å¤§ä½¬æ•™å¯¼ï¼</p><p><a href="https://github.com/fghrsh/live2d_api">åç«¯API</a><br><a href="https://github.com/stevenjoezhang/live2d-widget">å‰ç«¯API</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>live2d</tag>
      
      <tag>api</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æˆ‘èƒ†å°çš„å€Ÿå£æ¥äº†</title>
    <link href="/2021/04/28/wodxdejk/"/>
    <url>/2021/04/28/wodxdejk/</url>
    
    <content type="html"><![CDATA[<center><p>å¤äººäº‘ï¼šâ€œå‰äººå¯¡è¨€è¯­ï¼Œèºäººä¹‹è¾å¤šã€‚â€</p><p>ä»–äººæ˜¯éï¼Œä¸å¦‚ä¸è¨€ï¼›</p><p>äººäº‘äº¦äº‘ï¼Œä¸å¦‚ä¸è¨€ï¼›</p><p>è¨€è€Œä¸å½“ï¼Œä¸å¦‚ä¸è¨€ï¼›</p><p>æ—§äº‹é‡æï¼Œä¸å¦‚ä¸è¨€ï¼›</p><p>çŸ¥è€Œä¸è¡Œï¼Œä¸å¦‚ä¸è¨€ï¼›</p><p>çœŸæ­£æ™ºè€…ï¼ŒçŸ¥è€Œä¸è¨€ã€‚</p></center>]]></content>
    
    
    
    <tags>
      
      <tag>æ—¥è®°</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å°ç§‹ç§‹æœç´¢ä¸»é¡µ</title>
    <link href="/2021/04/28/xqqsszy/"/>
    <url>/2021/04/28/xqqsszy/</url>
    
    <content type="html"><![CDATA[<center><p>ä¸€ä¸ªç®€å•çš„æœç´¢ä¸»é¡µï¼Œæœç´¢æ¡†+ä¹¦ç­¾+çœ‹æ¿å¨˜= <a href="https://so.qiuliqi.top/" rel="noopener noreferrer" target="_blank">å°ç§‹ç§‹æœç´¢</a></p><p>æ¬¢è¿åŠ å…¥æµè§ˆå™¨ä¸»é¡µ</p></center><p><img src="https://cdn.jsdelivr.net/gh/qiuliqi/qiuliqi.github.io/img/20200620115334.png" alt="ä¸»é¡µæˆªå›¾"></p><p><img src="https://cdn.jsdelivr.net/gh/qiuliqi/qiuliqi.github.io/img/20210430085832.png" alt="ä¸»é¡µæˆªå›¾2"></p><p>åŸä½œè€…githubæºç ï¼š<a href="https://github.com/5iux/sou">æŸ¥çœ‹</a></p><p>æ„Ÿè°¢<a href="https://www.xiaolfeng.xyz/">ç­±é”‹</a>å¤§ä½¬çš„æŒ‡å¯¼</p>]]></content>
    
    
    
    <tags>
      
      <tag>html</tag>
      
      <tag>æœç´¢ä¸»é¡µ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å‘ç°è¡€å°æ¿ï¼</title>
    <link href="/2021/04/28/xxb/"/>
    <url>/2021/04/28/xxb/</url>
    
    <content type="html"><![CDATA[<p style="text-indent: 2em;">æ˜¨å¤©ä¸Šç­æ‘¸é±¼çš„æ—¶å€™ï¼Œå‘ç°äº†ä¸€ä½å¤§ä½¬ç”¨äº†è¡€å°æ¿çš„çœ‹æ¿å¨˜ï¼Œèè‰æ§çš„æˆ‘ç¬é—´æ¿€åŠ¨äº†ï¼Œæ›´é«˜å…´çš„æ˜¯å¤§ä½¬ç«Ÿç„¶æŠŠæ¨¡å‹ä¹Ÿå‘å‡ºæ¥äº†ï¼Œé‚£å¿…é¡»æ”¾åˆ°æˆ‘æ¡Œé¢ä¸Šå‘€!</p><h2 id="æŸ¥çœ‹æ¨¡å‹"><a href="#æŸ¥çœ‹æ¨¡å‹" class="headerlink" title="æŸ¥çœ‹æ¨¡å‹"></a>æŸ¥çœ‹æ¨¡å‹</h2><p><img src="https://cdn.jsdelivr.net/gh/qiuliqi/live2d@master/biz/sp180912_234533.png" alt="æ¨¡å‹å›¾ç‰‡"></p><h2 id="å…³äºæ¨¡å‹çš„ä½¿ç”¨"><a href="#å…³äºæ¨¡å‹çš„ä½¿ç”¨" class="headerlink" title="å…³äºæ¨¡å‹çš„ä½¿ç”¨"></a>å…³äºæ¨¡å‹çš„ä½¿ç”¨</h2><p style="text-indent: 2em;">ä¹‹å‰æˆ‘çš„çœ‹æ¿å¨˜éƒ½æ˜¯ç”¨çš„ç¬¬ä¸‰æ–¹å¤§ä½¬çš„apiï¼Œç›´åˆ°æœ€è¿‘çªç„¶ä¸èƒ½ç”¨äº†ï¼Œæ‰æƒ³åˆ°è¦è‡ªå·±å»ºä¸€ä¸ªapiï¼Œè‡ªå»ºä¸€ä¸ªapiä¹ŸæŒºç®€å•çš„ï¼Œå°±æ˜¯æŠŠå¤§ä½¬åšå¥½çš„æ–‡ä»¶æ”¾åˆ°è‡ªå·±çš„ç½‘ç«™ç©ºé—´å°±è¡Œï¼Œä¼¸æ‰‹å…šä¸“ä¸šä½¿ç”¨è¿‡ç¨‹å“ˆå“ˆã€‚è¿™é‡Œè‚¯å®šè¦æ„Ÿè°¢ä¸€ä¸‹å¤§ä½¬ä»¬å•¦</p><p style="text-indent: 2em;">å› ä¸ºè¡€å°æ¿æ˜¯ä¸€ä¸ªå•ç‹¬çš„æ¨¡å‹ï¼Œæˆ‘ä»¬å°±ä¸æŠŠä»–æ”¾åˆ°apié‡Œé¢å»äº†ï¼ˆä¸»è¦æ˜¯è‡ªå·±ä¹Ÿä¸ä¼šåœ¨apié‡Œæ·»åŠ æ¨¡å‹~~ï¼‰é‚£å°±ç›´æ¥æŠŠæ¨¡å‹æ–‡ä»¶ä¸Šä¼ åˆ°ç½‘ç«™æ ¹ç›®å½•ï¼Œç„¶åæ›¿æ¢æ‰apié“¾æ¥ä¸ºä½ çš„æ¨¡å‹é“¾æ¥å°±è¡Œï¼Œè¿™é‡Œæˆ‘ä¹Ÿæ˜¯çœ‹å¦å¤–ä¸€ä¸ªå¤§ä½¬å‘çš„æ–‡ç« å­¦ä¹ åˆ°çš„</p><p>è‡ªå·±çš„æ¨¡å‹æ¥å£ï¼š</p><pre><code>https://qiuliqi.top/xxb2/model/xxb/model.json</code></pre><p>æ›¿æ¢åŸwaifu.tips.jsä¸­çš„APIæ¥å£</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loadModel</span>(<span class="hljs-params">modelId, modelTexturesId</span>)</span>&#123;<br><span class="hljs-comment">// localStorage.setItem(&#x27;modelId&#x27;, modelId);</span><br><span class="hljs-comment">// if (modelTexturesId === undefined) modelTexturesId = 0;</span><br><span class="hljs-comment">// localStorage.setItem(&#x27;modelTexturesId&#x27;, modelTexturesId);</span><br>loadlive2d(<span class="hljs-string">&#x27;live2d&#x27;</span>,<span class="hljs-string">&#x27;https://qiuliqi.top/xxb2/model/xxb/model.json&#x27;</span><span class="hljs-comment">/*&#x27;https://api.fghrsh.net/live2d/get/?id=&#x27;+modelId+&#x27;-&#x27;+modelTexturesId*/</span>, <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;live2d&#x27;</span>,<span class="hljs-string">&#x27;æ¨¡å‹ &#x27;</span>+modelId+<span class="hljs-string">&#x27;-&#x27;</span>+modelTexturesId+<span class="hljs-string">&#x27; åŠ è½½å®Œæˆ&#x27;</span>));<br>&#125;<br></code></pre></td></tr></table></figure><p>å› ä¸ºæ²¡æœ‰è®¾ç½®å¾ˆå¤šä¸ªçš®è‚¤ï¼Œç›®å‰åªæœ‰å°å¯çˆ±-è¡€å°æ¿ä¸€ä¸ªã€‚æ‰€ä»¥modelIdï¼ŒmodelTexturesIdéƒ½å¯ä»¥å¿½ç•¥äº†ã€‚</p><p><del>æœ€åå°±æ˜¯è¡€å°æ¿åé¢é‚£ç‰Œå­äº†ï¼Œæˆ‘é‚£åŠè·¯å‡ºå®¶çš„æŠ€æœ¯è¿˜æ˜¯æ”¹ä¸äº†ï¼Œå›å¤´è¯·æ•™ä¸€ä¸‹å¤§ä½¬</del></p><p>å·²è§£å†³ï¼Œå¤§ä½¬çŒ«çŒ«å¤§ä½¬æœ‰å‘æ•™ç¨‹ï¼Œä¹‹å‰æ²¡è®¤çœŸçœ‹</p><p>èµ·é£ï¼š<a href="https://qiuliqi.top/xxb2/">https://qiuliqi.top/xxb2/</a></p><p>å¦‚æœæ˜¯ç”¨wallpaperåœ¨æ¡Œé¢æ˜¾ç¤ºçš„è¯ï¼Œåé¢è¿˜éœ€è¦åŠ ä¸Šå‚æ•°ï¼š</p><pre><code>https://qiuliqi.top/xxb2/?bottom=40&amp;amp;right=20</code></pre><p><img src="https://cdn.jsdelivr.net/gh/qiuliqi/qiuliqi.github.io/img/mZuCODtReEtxUO38.gif" alt="è¡€å°æ¿gif"></p><p>æœ€åæ„Ÿè°¢çŒ«ä¸å‘æ—¥è‘µåšå®¢åˆ¶ä½œçš„çœ‹æ¿å¨˜-è¡€å°æ¿ã€‚<a href="https://imjad.cn/archives/lab/add-dynamic-poster-girl-with-live2d-to-your-blog-03/">æŸ¥çœ‹åœ°å€</a></p><p>æ„Ÿè°¢Shakaå¤§ä½¬æä¾›çš„æ¢çœ‹æ¿å¨˜æ¨¡å‹çš„æ•™ç¨‹ã€‚<a href="http://blog.177kankan.com/view/34">æŸ¥çœ‹åœ°å€</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>live2d</tag>
      
      <tag>çœ‹æ¿å¨˜</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2021/04/28/hello-world/"/>
    <url>/2021/04/28/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
